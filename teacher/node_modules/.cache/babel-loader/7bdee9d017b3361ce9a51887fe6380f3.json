{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Mock from 'mockjs';\nimport Cookie from 'js-cookie';\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      rules: {\n        username: [{\n          required: true,\n          trigger: 'blur',\n          message: '请输入用户名'\n        }, {\n          min: 4,\n          max: 12,\n          message: '长度在 4 到 12 个字符',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          trigger: 'blur',\n          message: '请输入密码'\n        }, {\n          min: 4,\n          max: 12,\n          message: '长度在 4 到 12 个字符',\n          trigger: 'blur'\n        }]\n      },\n      user: {}\n    };\n  },\n  methods: {\n    //登录\n    login() {\n      //token信息\n      // const token = Mock.Random.guid()\n      // //将token信息存入cookie用于不同页面的通信\n      // Cookie.set('token',token);\n      this.$refs['loginForm'].validate(valid => {\n        if (valid) {\n          this.request.post(\"/service-user/user/login\", this.user).then(res => {\n            if (res.code === '200') {\n              if (res.data.actor === '教师') {\n                console.log(res);\n                localStorage.setItem(\"user\", JSON.stringify(res.data)); //把后端传过来的用户信息存储到浏览器\n                sessionStorage.setItem(\"menu\", JSON.stringify({\n                  path: \"/classes\",\n                  name: \"classes\"\n                }));\n                //跳转到首页\n                this.$router.push('/classes');\n                this.$message.success(\"登录成功\");\n              } else {\n                this.$message.error(\"用户不存在！！！\");\n              }\n            } else {\n              this.$message.error(res.msg);\n            }\n          });\n        }\n      });\n    },\n    resetLogin() {\n      this.$refs.loginForm.resetFields();\n    }\n  }\n};","map":{"version":3,"mappings":";AAuBA;AACA;AACA;AAEA;EACAA;IACA;MACAC;QACAC,WACA;UAAAC;UAAAC;UAAAC;QAAA,GACA;UAAAC;UAAAC;UAAAF;UAAAD;QAAA,EACA;QACAI,WACA;UAAAL;UAAAC;UAAAC;QAAA,GACA;UAAAC;UAAAC;UAAAF;UAAAD;QAAA;MAEA;MACAK;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;QACA;UACA;YACA;cACA;gBACAC;gBACAC;gBACAC;kBAAAC;kBAAAC;gBAAA;gBACA;gBACA;gBACA;cACA;gBACA;cACA;YACA;cACA;YACA;UACA;QAEA;MACA;IAGA;IACAC;MACA;IACA;EAEA;AAEA","names":["data","rules","username","required","trigger","message","min","max","password","user","methods","login","console","localStorage","sessionStorage","path","name","resetLogin"],"sourceRoot":"src/views","sources":["Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"background\">\r\n        <div class=\"login\">\r\n            <div class=\"avatar_box\">\r\n                <img src=\"../assets/avater.jpeg\" alt=\"\">\r\n            </div>\r\n            <el-form  ref=\"loginForm\"  :model=\"user\" :inline=\"true\" :rules=\"rules\">\r\n                <el-form-item  prop=\"username\">\r\n                    <el-input size=\"large\" v-model=\"user.username\" prefix-icon=\"el-icon-user\" placeholder=\"请输入用户名\" clearable></el-input>\r\n                </el-form-item>\r\n                <el-form-item size=\"medium\" prop=\"password\">\r\n                    <el-input type=\"password\" v-model=\"user.password\" prefix-icon=\"el-icon-lock\" placeholder=\"请输入密码\"  show-password ></el-input>\r\n                </el-form-item>\r\n                <el-form-item >\r\n                    <el-button size=\"medium\" @click=\"login\" type=\"primary\">登录</el-button>\r\n                    <el-button size=\"medium\" @click=\"resetLogin\">重置</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </div>\r\n   \r\n</template>\r\n<script >\r\nimport Mock from 'mockjs'\r\nimport Cookie from 'js-cookie'\r\nimport axios from 'axios'\r\n\r\nexport default{\r\n    data () {\r\n        return {\r\n            rules:{\r\n                username: [\r\n                    {required: true, trigger: 'blur', message: '请输入用户名'},\r\n                    { min: 4, max: 12, message: '长度在 4 到 12 个字符', trigger: 'blur' }\r\n                ],\r\n                password: [\r\n                    {required: true, trigger: 'blur', message: '请输入密码'},\r\n                    { min: 4, max: 12, message: '长度在 4 到 12 个字符', trigger: 'blur' }\r\n                ],\r\n            },\r\n            user: {},\r\n        }\r\n    },\r\n    methods: {\r\n        //登录\r\n        login(){\r\n            //token信息\r\n            // const token = Mock.Random.guid()\r\n            // //将token信息存入cookie用于不同页面的通信\r\n            // Cookie.set('token',token);\r\n            this.$refs['loginForm'].validate((valid) => {\r\n                if(valid){\r\n                    this.request.post(\"/service-user/user/login\",this.user).then(res =>{                   \r\n                        if(res.code === '200'){                     \r\n                            if(res.data.actor === '教师'){\r\n                                console.log(res)\r\n                                localStorage.setItem(\"user\",JSON.stringify(res.data)) //把后端传过来的用户信息存储到浏览器\r\n                                sessionStorage.setItem(\"menu\",JSON.stringify({ path: \"/classes\", name: \"classes\",}))\r\n                                //跳转到首页\r\n                                this.$router.push('/classes')\r\n                                this.$message.success(\"登录成功\")\r\n                            }else{\r\n                                this.$message.error(\"用户不存在！！！\")\r\n                            }\r\n                        }else{\r\n                            this.$message.error(res.msg)\r\n                        }\r\n                    })\r\n                    \r\n                }\r\n            })\r\n            \r\n\r\n        },\r\n        resetLogin(){\r\n            this.$refs.loginForm.resetFields();\r\n        }\r\n\r\n    },\r\n    \r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.background{\r\n    margin: 0;\r\n    padding: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: url(../assets/background.jpeg)  no-repeat center 0px;\r\n    position:fixed;\r\n    background-size: cover;\r\n\r\n    .login{\r\n        width: 450px;  \r\n        height: 300px;\r\n        margin: 180px auto;\r\n        border:1px solid #eaeaea ;\r\n        background-color: #fff;\r\n        border-radius: 15px;\r\n        box-shadow: 0 0 10px #cac6c6;\r\n        .avatar_box{\r\n            // 将图片变小\r\n            height: 100px;\r\n            width: 100px;\r\n            border: 10px solid #f9f9f9;\r\n            border-radius: 50%;\r\n            padding: 10px;\r\n            box-shadow: 0 0 10px rgb(185, 215, 239);\r\n            position: absolute;\r\n            left: 50%;\r\n            transform: translate(-50%,-50%);\r\n            background-color: #fff;\r\n            img{\r\n                width: 100%;\r\n                height: 100%;\r\n                border-radius: 50%;\r\n                background-color: #eee;\r\n            }\r\n        }\r\n    \r\n        .el-form{\r\n            margin-top: 70px;\r\n            padding: 30px;\r\n            box-sizing: border-box;\r\n            .el-input{\r\n                width: 380px;\r\n\r\n            }\r\n            h3{\r\n                text-align: center;\r\n                margin-bottom: 20px;\r\n            }\r\n            .el-form-item{\r\n                display: flex;\r\n                justify-content: center;\r\n                .el-input{\r\n                    width: 380px;\r\n                 \r\n                }\r\n            }\r\n           \r\n        }\r\n    }\r\n\r\n    \r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}