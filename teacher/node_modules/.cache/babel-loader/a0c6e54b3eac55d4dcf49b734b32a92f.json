{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  props: {\n    step: {\n      //控制速度\n      type: Number,\n      default: 40\n    }\n  },\n  data() {\n    return {\n      isActive: false,\n      total: 0,\n      //分页总条数\n      pageNum: 1,\n      //页码\n      pageSize: 6,\n      //每页显示多少条数据\n      couId: '',\n      //课程idid\n      teaId: '',\n      //课程对应的教师id\n      couName: '',\n      tName: '',\n      cover: '',\n      //封面\n      tableData: [],\n      //课程列表\n      dialogVisibleAdd: false,\n      //新增课程弹窗\n      dialogVisibleEdit: false,\n      dialogVisibleAddPractice: false,\n      //新增线下实践弹窗\n      coursename: '',\n      //点击线下实践按钮获取当前课程名称\n      form: {\n        couName: '',\n        couIntroduction: '',\n        couType: '',\n        //课程大类\n        couChileType: '',\n        //课程小类\n        couPrice: '',\n        couCataNum: 0,\n        //章节数\n        teaId: 0\n      },\n      forms: {},\n      courseType: [],\n      //课程类型\n      modalKey: 0,\n      user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\n      rules: {\n        //新增弹窗表单验证\n        couName: [{\n          required: true,\n          message: '请输入课程名称',\n          trigger: 'blur'\n        }],\n        teaId: [{\n          required: true,\n          message: '请输入课程作者',\n          trigger: 'blur'\n        }],\n        couPrice: [{\n          required: true,\n          message: '请输入课程价格',\n          trigger: 'blur'\n        }],\n        couIntroduction: [{\n          required: true,\n          message: '请输入课程介绍',\n          trigger: 'blur'\n        }]\n      },\n      rulesPractice: {\n        //新增线下实践表单验证\n        praName: [{\n          required: true,\n          message: '请输入线下实践标题',\n          trigger: 'blur'\n        }],\n        praSite: [{\n          required: true,\n          message: '请输入线下实践地址',\n          trigger: 'blur'\n        }],\n        praMain: [{\n          required: true,\n          message: '请输入线下实践任务内容',\n          trigger: 'blur'\n        }],\n        cover: [{\n          required: true,\n          message: '请上传头像',\n          trigger: 'change'\n        }]\n      },\n      options: [\n      //课程类型下拉框\n      {\n        value: '1',\n        label: '康复',\n        children: [{\n          value: '1',\n          label: '老年疾病康复'\n        }, {\n          value: '2',\n          label: '儿科疾病康复'\n        }, {\n          value: '3',\n          label: '运动创伤康复'\n        }, {\n          value: '4',\n          label: '神经系统疾病康复'\n        }, {\n          value: '5',\n          label: '其他康复'\n        }]\n      }, {\n        value: '2',\n        label: '护理',\n        children: [{\n          value: '1',\n          label: '老年护理'\n        }, {\n          value: '2',\n          label: '儿童护理'\n        }, {\n          value: '3',\n          label: '内科护理'\n        }, {\n          value: '4',\n          label: '外科护理'\n        }, {\n          value: '5',\n          label: '其他护理'\n        }]\n      }, {\n        value: '3',\n        label: '养生',\n        children: [{\n          value: '1',\n          label: '饮食保健'\n        }, {\n          value: '2',\n          label: '运动保健'\n        }, {\n          value: '3',\n          label: '中医针灸推拿养生'\n        }, {\n          value: '3',\n          label: '其他'\n        }]\n      }, {\n        value: '4',\n        label: '科普',\n        children: [{\n          value: '1',\n          label: '急救'\n        }, {\n          value: '2',\n          label: '传染病'\n        }, {\n          value: '3',\n          label: '其他'\n        }]\n      }]\n    };\n  },\n  created() {\n    this.load();\n  },\n  mounted() {\n    window.addEventListener('scroll', this.handleScroll); //回到顶部\n  },\n\n  methods: {\n    load() {\n      this.request.get(\"/service-class/class/findCourse\", {\n        params: {\n          couName: this.couName,\n          teaName: this.tName,\n          pageSize: this.pageSize,\n          pageNum: this.pageNum,\n          deleted: 0\n        }\n      }).then(res => {\n        //console.log(res,res.data.total)\n        this.tableData = res.data.records;\n        this.total = res.data.total;\n      });\n    },\n    //每页显示多少条数据\n    handleSizeChange(pageSize) {\n      // console.log(pageSize)\n      this.pageSize = pageSize;\n      this.load();\n    },\n    //页码\n    handleCurrentChange(pageNum) {\n      // console.log(pageNum)\n      this.pageNum = pageNum;\n      this.load();\n    },\n    //新增课程按钮\n    addCourse() {\n      this.dialogVisibleAdd = true;\n    },\n    //新增课程弹窗确定按钮\n    saveConurse() {\n      this.$refs['courseFrom'].validate(valid => {\n        if (valid) {\n          if (this.courseType.length !== 0) {\n            this.dialogVisibleAdd = false;\n            this.form.teaId = this.user.teaId; //教师id\n            this.form.couType = this.courseType[0];\n            this.form.couChileType = this.courseType[1];\n            this.request.post(\"/service-course/course\", this.form).then(res => {\n              //console.log(res,'res')\n              if (res.code === '200') {\n                this.$message.success(\"新增课程成功！！！\");\n                this.load();\n              } else {\n                this.$message.error(\"新增课程失败！！！\");\n              }\n            });\n          } else {\n            this.$message.info(\"请选择课程类型！！！\");\n          }\n        }\n      });\n    },\n    handleAvatarSuccess(res) {\n      for (let i = 0; i < res.data.length; i++) {\n        this.form.cover = res.data[i].url;\n        console.log(this.form.cover, 'this.form.cover');\n      }\n    },\n    //新增课程弹窗关闭按钮\n    handleClose(done) {\n      this.form = {};\n      this.courseType = [];\n      done();\n    },\n    //新增课程弹窗重置按钮\n    resetDialogAdd() {\n      this.form = {}, this.courseType = [];\n    },\n    //刷新按钮\n    reast() {\n      this.couName = '', this.load();\n    },\n    //修改课程按钮\n    editCourse(row) {\n      if (this.user.truename === row.teaName) {\n        this.form = row;\n        this.courseType[0] = row.couType;\n        this.courseType[1] = row.couChileType;\n        this.modalKey++; //改变key值，组件重新渲染，实现回填功能\n        this.dialogVisibleAdd = true;\n      } else {\n        this.$message.info(\"该课程不是您创建的，您没有权限进行修改！\");\n      }\n    },\n    //删除课程按钮\n    deleteCourse(row) {\n      if (this.user.truename === row.teaName) {\n        this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.request.post(\"/service-course/course\", {\n            couId: row.couId,\n            deleted: 1\n          }).then(res => {\n            console.log(res, 'res');\n            if (res.code === '200') {\n              this.$message.success(\"删除成功\");\n              this.load();\n            } else {\n              this.$message.error(\"删除失败\");\n            }\n          });\n        }).catch(() => {\n          this.$message.info(\"已取消删除\");\n        });\n      } else {\n        this.$message.info(\"该课程不是您创建的，您没有权限进行删除！\");\n      }\n    },\n    //章节管理按钮\n    chapterManager(row) {\n      this.$router.push({\n        path: '/chapterManager',\n        query: {\n          //    courseName: courseName,\n          //    courseId: courseId,\n          courseData: JSON.stringify(row)\n        }\n      });\n    },\n    //新增线下实践按钮\n    addPractice(couId, teaId, teaName) {\n      if (this.user.truename === teaName) {\n        this.couId = couId;\n        this.teaId = teaId;\n        this.dialogVisibleAddPractice = true;\n      } else {\n        this.$message.info('该课程不是您创建的，您没有权限创建线下实践！');\n      }\n    },\n    //线下实践弹窗确定按钮\n    savePractice() {\n      this.$refs['practiceFrom'].validate(valid => {\n        if (valid) {\n          this.forms.couId = this.couId; //课程id\n          this.forms.teaId = this.teaId; //教师id\n          this.request.post(\"/service-practice/practice\", this.forms).then(res => {\n            if (res.code === '200') {\n              this.dialogVisibleAddPractice = false;\n              this.$message.success(\"创建线下实践成功！\");\n              this.forms = {};\n            } else {\n              this.$message.success(\"创建线下实践失败！\");\n            }\n          });\n        }\n      });\n    },\n    //回到顶部\n    handleScroll(e) {\n      if (document.documentElement.scrollTop > 50) {\n        this.isActive = true;\n      } else {\n        this.isActive = false;\n      }\n    },\n    toTop(step) {\n      //参数step表示时间间隔的幅度大小，以此来控制速度\n      //当回到页面顶部的时候需要将定时器清除\n      document.documentElement.scrollTop -= step;\n      if (document.documentElement.scrollTop > 0) {\n        var time = setTimeout(() => this.toTop(step), 15);\n      } else {\n        clearTimeout(time);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";AA0JA;EACAA;IACAC;MAAA;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;QACAR;QACAS;QACAC;QAAA;QACAC;QAAA;QACAC;QACAC;QAAA;QACAd;MACA;MACAe;MACAC;MAAA;MACAC;MACAC;MACAC;QAAA;QACAlB,UACA;UAAAmB;UAAAC;UAAAC;QAAA,EACA;QACAtB,QACA;UAAAoB;UAAAC;UAAAC;QAAA,EACA;QACAT,WACA;UAAAO;UAAAC;UAAAC;QAAA,EACA;QACAZ,kBACA;UAAAU;UAAAC;UAAAC;QAAA;MAEA;MACAC;QAAA;QACAC,UACA;UAAAJ;UAAAC;UAAAC;QAAA,EACA;QACAG,UACA;UAAAL;UAAAC;UAAAC;QAAA,EACA;QACAI,UACA;UAAAN;UAAAC;UAAAC;QAAA,EACA;QACAnB,QACA;UAAAiB;UAAAC;UAAAC;QAAA;MAEA;MACAK;MAAA;MACA;QACAC;QACAC;QACAC,WACA;UAAAF;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA;MAEA,GACA;QACAD;QACAC;QACAC,WACA;UAAAF;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA;MAEA,GACA;QACAD;QACAC;QACAC,WACA;UAAAF;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA;MAEA,GACA;QACAD;QACAC;QACAC,WACA;UAAAF;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA,GACA;UAAAD;UAAAC;QAAA;MAEA;IAEA;EACA;EACAE;IACA;EACA;EACAC;IACAC;EAEA;;EACAC;IACAC;MACA;QACAC;UACAnC;UACAoC;UACAvC;UACAD;UACAyC;QACA;MACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;QACA;UACA;YACA;YACA;YACA;YACA;YACA;cACA;cACA;gBACA;gBACA;cACA;gBACA;cACA;YACA;UACA;YACA;UACA;QACA;MACA;IAEA;IACAC;MACA;QACA;QACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACAC;IACA;IACA;IACAC;MACA,gBACA;IACA;IACA;IACAC;MACA,mBACA;IACA;IACA;IACAC;MACA;QACA;QACA;QACA;QACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MAEA;QACA;UACAC;UACAC;UACA5D;QACA;UACA,4CACA;YACAO;YACAuC;UACA,EACA;YACAM;YACA;cACA;cACA;YACA;cACA;YACA;UACA;QACA;UACA;QACA;MACA;QACA;MACA;IAGA;IACA;IACAS;MACA;QACAC;QACAC;UACA;UACA;UACAC;QACA;MACA;IACA;IACA;IACAC;MACA;QACA;QACA;QACA;MACA;QACA;MACA;IAEA;IACA;IACAC;MACA;QACA;UACA;UACA;UACA;YACA;cACA;cACA;cACA;YACA;cACA;YACA;UACA;QAEA;MACA;IACA;IACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACAC;MACA;QACA;MACA;QACAC;MACA;IACA;EACA;AACA","names":["props","step","type","default","data","isActive","total","pageNum","pageSize","couId","teaId","couName","tName","cover","tableData","dialogVisibleAdd","dialogVisibleEdit","dialogVisibleAddPractice","coursename","form","couIntroduction","couType","couChileType","couPrice","couCataNum","forms","courseType","modalKey","user","rules","required","message","trigger","rulesPractice","praName","praSite","praMain","options","value","label","children","created","mounted","window","methods","load","params","teaName","deleted","handleSizeChange","handleCurrentChange","addCourse","saveConurse","handleAvatarSuccess","console","handleClose","done","resetDialogAdd","reast","editCourse","deleteCourse","confirmButtonText","cancelButtonText","chapterManager","path","query","courseData","addPractice","savePractice","handleScroll","toTop","document","clearTimeout"],"sourceRoot":"src/views/Course","sources":["Course.vue"],"sourcesContent":["<template>\r\n    <div > \r\n        <!-- 回到顶部 -->\r\n        <div class=\"scroll\" :class=\"{show:isActive}\">\r\n            <el-button icon=\"el-icon-caret-top\" id=\"toTop\" @click=\"toTop(step)\"  circle></el-button>\r\n        </div>  \r\n        \r\n        <div class=\"addCourse\">\r\n            <!-- 搜索 -->\r\n           <el-input size=\"mini\"  style=\"width: 200px\" suffix-icon=\"el-icon-search\"  placeholder=\"请输入课程名称\" v-model=\"couName\" @clear=\"load\" clearable></el-input>\r\n           <el-input size=\"mini\"  style=\"width: 200px;margin-left: 10px\" suffix-icon=\"el-icon-search\"  placeholder=\"请输入作者\" v-model=\"tName\" @clear=\"load\" clearable></el-input>\r\n           <el-button size=\"mini\" style=\"margin-left: 10px\" type=\"primary\" @click=\"load\">搜索</el-button> \r\n           <!-- 刷新按钮 -->\r\n           <el-button size=\"mini\" style=\"margin-left: 10px\" type=\"primary\" @click=\"reast\"><i class=\"el-icon-refresh\"></i></el-button> \r\n           <!-- 新增课程按钮 -->\r\n            <el-button type=\"primary\" @click=\"addCourse\" >新增课程 <i class=\"el-icon-circle-plus-outline\"></i></el-button>\r\n            \r\n\r\n        </div>\r\n\r\n        <div class=\"courseDiv\">\r\n            <div class=\"course-show\" v-for=\"item in tableData\" :key=\"item.couId\">\r\n                <div class=\"course-show-top\">   \r\n                    <img :src=\"item.cover\" > \r\n                </div>\r\n                <div class=\"course-show-content\">\r\n                    <h3>{{item.couName}}</h3>\r\n                    <p class=\"couIntroduction\">{{item.couIntroduction}}</p>\r\n                    <p class=\"course-number\">\r\n                        <span>价格：{{item.couPrice}}</span>\r\n                        <span>章节：{{item.couChaNum}}</span>\r\n                        <span>收藏：{{item.couCollNum}}</span>\r\n                    </p>\r\n                </div>\r\n                <div class=\"course-show-bottom\">\r\n                    <el-tooltip class=\"item\" effect=\"light\" content=\"修改课程\" placement=\"bottom\">\r\n                        <el-button type=\"primary\" icon=\"el-icon-edit\" @click=\"editCourse(item)\" circle></el-button>\r\n                    </el-tooltip>\r\n                    <el-tooltip class=\"item\" effect=\"light\" content=\"删除课程\" placement=\"bottom\">\r\n                        <el-button type=\"danger\" @click=\"deleteCourse(item)\" icon=\"el-icon-delete\" circle></el-button>\r\n                    </el-tooltip>\r\n                    <el-tooltip class=\"item\" effect=\"light\" content=\"章节管理\" placement=\"bottom\">\r\n                        <el-button type=\"success\" icon=\"el-icon-c-scale-to-original\"  @click=\"chapterManager(item)\"  circle></el-button>\r\n                    </el-tooltip>\r\n                    <el-tooltip class=\"item\" effect=\"light\" content=\"创建线下实践\" placement=\"bottom\">\r\n                        <el-button type=\"warning\" style=\"margin-right:10px ;\" icon=\"el-icon-s-opportunity\" \r\n                            @click=\"addPractice(item.couId,item.teaId,item.teaName)\" circle></el-button>             \r\n                    </el-tooltip>\r\n                </div>\r\n            </div>\r\n    \r\n        </div>\r\n      \r\n        <!-- 分页 -->\r\n         <div class=\"block\">\r\n            <el-pagination\r\n              @size-change=\"handleSizeChange\"\r\n              @current-change=\"handleCurrentChange\"\r\n              :current-page.=\"pageNum\"\r\n              :page-sizes=\"[6, 9, 12]\"\r\n              :page-size=\"pageSize\"\r\n              layout=\" total,sizes , prev,  pager, next, jumper\"\r\n              :total=\"total\">\r\n            </el-pagination>\r\n        </div>\r\n\r\n        <!-- 新增课程弹窗 -->\r\n        <el-dialog\r\n            title=\"新增课程\"\r\n            :visible.sync=\"dialogVisibleAdd\"\r\n            :before-close=\"handleClose\"\r\n            width=\"30%\" center>\r\n            \r\n            <el-form label-width=\"90px\" ref=\"courseFrom\" :rules=\"rules\" :model=\"form\" >\r\n                <el-form-item  label=\"课程名称\" prop=\"couName\">\r\n                    <el-input style=\"width:250px\"  v-model=\"form.couName\" placeholder=\"请输入课程名称\" clearable></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"课程类型\">\r\n                    <el-cascader style=\"width:250px\"  v-model=\"courseType\" :key=\"modalKey\" :options=\"options\" clearable></el-cascader>\r\n                </el-form-item>\r\n                <!-- <el-form-item >\r\n                    <el-input type=\"hidden\" v-model=\"form.teaId = user.teaId\" :disabled=\"true\" placeholder=\"请输入课程作者\" clearable></el-input>\r\n                </el-form-item> -->\r\n                <el-form-item label=\"课程价格\" prop=\"couPrice\">\r\n                    <el-input style=\"width:250px\"  v-model=\"form.couPrice\" placeholder=\"请输入课程价格\" clearable></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"课程介绍\" prop=\"couIntroduction\">\r\n                    <el-input  \r\n                    style=\"width:250px\" \r\n                        autosize\r\n                        type=\"textarea\" \r\n                        v-model=\"form.couIntroduction\" \r\n                        placeholder=\"请输入课程介绍\" \r\n                        clearable>\r\n                    </el-input>\r\n                </el-form-item>\r\n                <el-form-item  prop=\"cover\" label=\"课程封面\" >\r\n                    <el-upload\r\n                        class=\"avatarUploader\"\r\n                        action=\"http://localhost:9090/service-coustype/file/upload\"\r\n                        :show-file-list=\"false\"\r\n                        :on-success=\"handleAvatarSuccess\">\r\n                      <img v-if=\"form.cover\" :src=\"form.cover\" class=\"avatar\" >\r\n                      <i v-else class=\"el-icon-plus avatar-uploader-icon\" ></i>\r\n                    </el-upload>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"resetDialogAdd\">重 置</el-button>\r\n                <el-button type=\"primary\" @click=\"saveConurse\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n\r\n\r\n        <!-- 新增线下实践弹窗 -->\r\n        <el-dialog\r\n            title=\"创建线下实践\"\r\n            :visible.sync=\"dialogVisibleAddPractice\"\r\n            width=\"30%\" center>\r\n            \r\n            <el-form label-width=\"90px\" ref=\"practiceFrom\" :rules=\"rulesPractice\" :model=\"forms\" >\r\n                <!-- <el-form-item > \r\n                    <el-input type=\"hidden\" v-model=\"forms.couId = couId\" :disabled=\"true\" ></el-input>\r\n                </el-form-item> \r\n                <el-form-item  >\r\n                    <el-input type=\"hidden\" v-model=\"forms.teaId = teaId\" :disabled=\"true\" ></el-input>\r\n                </el-form-item> -->\r\n                <el-form-item label=\"标  题\" prop=\"praName\">\r\n                    <el-input  style=\"width: 250px;\" v-model=\"forms.praName\" placeholder=\"请输入标题\" clearable></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"地  址\" prop=\"praSite\">\r\n                    <el-input  style=\"width: 250px;\" v-model=\"forms.praSite\" placeholder=\"请输入地址\" clearable></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"任务内容\" prop=\"praMain\">\r\n                    <el-input  \r\n                        style=\"width: 250px;\"\r\n                        type=\"textarea\" \r\n                        v-model=\"forms.praMain\" \r\n                        placeholder=\"请输入任务内容\" \r\n                        autosize\r\n                        clearable>\r\n                    </el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogVisibleAddPractice = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"savePractice\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n \r\n<script>\r\n\r\nexport default{\r\n    props: {\r\n        step:{   //控制速度\r\n            type: Number,\r\n            default: 40  \r\n        }\r\n    },\r\n    data() {\r\n        return{\r\n           isActive: false,\r\n           total: 0, //分页总条数\r\n           pageNum: 1,//页码\r\n           pageSize:6,//每页显示多少条数据\r\n           couId: '',//课程idid\r\n           teaId: '',//课程对应的教师id\r\n           couName: '',\r\n           tName: '',\r\n           cover: '',//封面\r\n           tableData: [], //课程列表\r\n           dialogVisibleAdd: false,//新增课程弹窗\r\n           dialogVisibleEdit: false,\r\n           dialogVisibleAddPractice: false,//新增线下实践弹窗\r\n           coursename: '', //点击线下实践按钮获取当前课程名称\r\n           form: {\r\n               couName: '',\r\n               couIntroduction: '',\r\n               couType: '',//课程大类\r\n               couChileType: '',//课程小类\r\n               couPrice: '',\r\n               couCataNum: 0, //章节数\r\n               teaId: 0,\r\n           },  \r\n           forms: {},\r\n           courseType:[],//课程类型\r\n           modalKey:0,\r\n           user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},        \r\n           rules:{//新增弹窗表单验证\r\n               couName: [\r\n                   {required: true, message: '请输入课程名称', trigger: 'blur'},\r\n               ],\r\n               teaId: [\r\n                   {required: true, message: '请输入课程作者', trigger: 'blur'},\r\n               ],\r\n               couPrice: [\r\n                   {required: true, message: '请输入课程价格', trigger: 'blur'},\r\n               ],\r\n               couIntroduction: [\r\n                   {required: true, message: '请输入课程介绍', trigger: 'blur'},\r\n               ],\r\n           },\r\n           rulesPractice: {//新增线下实践表单验证\r\n                praName: [\r\n                    {required: true, message: '请输入线下实践标题', trigger: 'blur'},\r\n                ],\r\n                praSite: [\r\n                    {required: true, message: '请输入线下实践地址', trigger: 'blur'},\r\n                ],\r\n                praMain: [\r\n                    {required: true, message: '请输入线下实践任务内容', trigger: 'blur'},\r\n                ],\r\n                cover: [\r\n                    {required: true, message: '请上传头像', trigger: 'change'},\r\n                ],\r\n           },\r\n           options:[//课程类型下拉框\r\n               {\r\n                   value: '1',\r\n                   label: '康复',\r\n                   children: [\r\n                        {value: '1', label: '老年疾病康复'},\r\n                       {value: '2', label: '儿科疾病康复'},\r\n                       {value: '3', label: '运动创伤康复'},\r\n                       {value: '4', label: '神经系统疾病康复'},\r\n                       {value: '5', label: '其他康复'},\r\n                   ]\r\n               },              \r\n               {\r\n                   value: '2',\r\n                   label: '护理',\r\n                   children: [\r\n                       {value: '1', label: '老年护理'},\r\n                       {value: '2', label: '儿童护理'},\r\n                       {value: '3', label: '内科护理'},\r\n                       {value: '4', label: '外科护理'},\r\n                       {value: '5', label: '其他护理'},\r\n                   ]\r\n               },\r\n               {\r\n                   value: '3',\r\n                   label: '养生',\r\n                   children: [\r\n                       {value: '1', label: '饮食保健'},\r\n                       {value: '2', label: '运动保健'},\r\n                       {value: '3', label: '中医针灸推拿养生'},\r\n                       {value: '3', label: '其他'},\r\n                   ]\r\n               },\r\n               {\r\n                   value: '4',\r\n                   label: '科普',\r\n                   children: [\r\n                       {value: '1', label: '急救'},\r\n                       {value: '2', label: '传染病'},\r\n                       {value: '3', label: '其他'},\r\n                   ]\r\n               },\r\n           ],\r\n        }\r\n    },\r\n    created () {\r\n       this.load()\r\n    },\r\n    mounted () {\r\n        window.addEventListener('scroll', this.handleScroll)//回到顶部\r\n        \r\n    },\r\n    methods: {\r\n       load(){\r\n           this.request.get(\"/service-class/class/findCourse\",{\r\n               params: {\r\n                   couName: this.couName,\r\n                   teaName: this.tName,\r\n                   pageSize: this.pageSize,\r\n                   pageNum: this.pageNum,\r\n                   deleted: 0,\r\n               }\r\n           }).then(res => {\r\n                //console.log(res,res.data.total)\r\n                this.tableData = res.data.records\r\n                this.total = res.data.total\r\n           })\r\n       },\r\n       //每页显示多少条数据\r\n       handleSizeChange(pageSize){\r\n           // console.log(pageSize)\r\n           this.pageSize = pageSize\r\n           this.load()\r\n       },\r\n       //页码\r\n       handleCurrentChange(pageNum){\r\n           // console.log(pageNum)\r\n           this.pageNum = pageNum\r\n           this.load()\r\n       },\r\n       //新增课程按钮\r\n       addCourse(){\r\n           this.dialogVisibleAdd = true;\r\n       },\r\n       //新增课程弹窗确定按钮\r\n       saveConurse(){\r\n           this.$refs['courseFrom'].validate((valid) => {          \r\n               if(valid ){                   \r\n                    if(this.courseType.length !== 0){\r\n                        this.dialogVisibleAdd = false;\r\n                        this.form.teaId = this.user.teaId //教师id\r\n                        this.form.couType = this.courseType[0]\r\n                        this.form.couChileType = this.courseType[1]\r\n                        this.request.post(\"/service-course/course\", this.form).then(res => {\r\n                            //console.log(res,'res')\r\n                            if (res.code === '200') {\r\n                                this.$message.success(\"新增课程成功！！！\")\r\n                                this.load()\r\n                            } else {\r\n                                this.$message.error(\"新增课程失败！！！\")\r\n                            }\r\n                        })\r\n                    } else {\r\n                        this.$message.info(\"请选择课程类型！！！\")\r\n                    }\r\n               }\r\n           })\r\n           \r\n       },\r\n       handleAvatarSuccess(res){\r\n            for (let i=0 ;i< res.data.length ;i++){\r\n                this.form.cover = res.data[i].url\r\n                console.log(this.form.cover,'this.form.cover')\r\n            }\r\n        },\r\n       //新增课程弹窗关闭按钮\r\n       handleClose(done) {\r\n        this.form = {}\r\n        this.courseType=[]\r\n        done();\r\n        },\r\n       //新增课程弹窗重置按钮\r\n       resetDialogAdd(){\r\n            this.form = {},\r\n            this.courseType=[]\r\n       },\r\n       //刷新按钮\r\n       reast(){\r\n           this.couName = '',\r\n           this.load()\r\n        },\r\n       //修改课程按钮\r\n       editCourse(row){    \r\n            if(this.user.truename === row.teaName){\r\n                this.form = row\r\n                this.courseType[0] = row.couType\r\n                this.courseType[1] = row.couChileType\r\n                this.modalKey++;//改变key值，组件重新渲染，实现回填功能\r\n                this.dialogVisibleAdd = true  \r\n            }else{\r\n                this.$message.info(\"该课程不是您创建的，您没有权限进行修改！\")\r\n            }        \r\n       },\r\n       //删除课程按钮\r\n       deleteCourse(row){\r\n            \r\n            if(this.user.truename === row.teaName){\r\n                this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    this.request.post(\"/service-course/course\",\r\n                        {\r\n                            couId: row.couId,\r\n                            deleted: 1,\r\n                        }\r\n                    ).then(res => {\r\n                        console.log(res, 'res')\r\n                        if (res.code === '200') {\r\n                            this.$message.success(\"删除成功\")\r\n                            this.load()\r\n                        } else {\r\n                            this.$message.error(\"删除失败\")\r\n                        }\r\n                    }) \r\n                }).catch(() => {\r\n                    this.$message.info(\"已取消删除\")         \r\n                });    \r\n            }else{\r\n                this.$message.info(\"该课程不是您创建的，您没有权限进行删除！\")\r\n            }  \r\n\r\n              \r\n       },\r\n       //章节管理按钮\r\n       chapterManager(row){\r\n           this.$router.push({\r\n               path: '/chapterManager',\r\n               query:{\r\n                //    courseName: courseName,\r\n                //    courseId: courseId,\r\n                    courseData: JSON.stringify(row)\r\n               }\r\n          })\r\n       },\r\n       //新增线下实践按钮\r\n       addPractice(couId,teaId,teaName){     \r\n            if(this.user.truename === teaName){\r\n                this.couId = couId\r\n                this.teaId = teaId\r\n                this.dialogVisibleAddPractice = true       \r\n            }else{\r\n                this.$message.info('该课程不是您创建的，您没有权限创建线下实践！')\r\n            }     \r\n              \r\n       },\r\n       //线下实践弹窗确定按钮\r\n       savePractice(){\r\n           this.$refs['practiceFrom'].validate((valid) => {\r\n               if(valid){\r\n                    this.forms.couId = this.couId //课程id\r\n                    this.forms.teaId = this.teaId //教师id\r\n                    this.request.post(\"/service-practice/practice\",this.forms).then(res => {\r\n                        if(res.code === '200'){\r\n                            this.dialogVisibleAddPractice = false\r\n                            this.$message.success(\"创建线下实践成功！\")\r\n                            this.forms = {}\r\n                        }else{\r\n                            this.$message.success(\"创建线下实践失败！\")\r\n                        }\r\n                    })\r\n                  \r\n               }\r\n           })        \r\n       },\r\n       //回到顶部\r\n       handleScroll (e) {\r\n            if (document.documentElement.scrollTop > 50) {\r\n                this.isActive = true\r\n            } else {\r\n                this.isActive = false\r\n            }\r\n        },\r\n        toTop(step){\r\n            //参数step表示时间间隔的幅度大小，以此来控制速度\r\n            //当回到页面顶部的时候需要将定时器清除\r\n            document.documentElement.scrollTop-=step;\r\n            if (document.documentElement.scrollTop>0) {\r\n                var time=setTimeout(()=>this.toTop(step),15);\r\n            }else {\r\n                clearTimeout(time);\r\n            }\r\n        },\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.scroll{\r\n    position: fixed;\r\n    right: 50px;\r\n    bottom: 60px;\r\n    width: 45px;\r\n    height: 90px;\r\n    cursor: pointer;\r\n    display: none;  \r\n    .el-button{\r\n        width: 50px;\r\n        height: 50px;\r\n        font-size: 20px;\r\n        color: #409eff;\r\n    }\r\n}\r\n.scroll>div{\r\n    width: 45px;\r\n    height: 45px;\r\n    transform: rotate(90deg);\r\n    line-height: 45px;\r\n    text-align: center;\r\n    font-size: 35px;\r\n    font-family: \"黑体\";\r\n    background-color: rgba(0,0,0,.2);\r\n    color: #fff;\r\n}\r\n.scroll>div:hover{\r\n    background-color: rgba(0,0,0,.5);\r\n}\r\n.show{\r\n    display: block;\r\n}\r\n.addCourse{\r\n    margin-top: -10px;\r\n    margin-bottom: 20px;\r\n}\r\n.courseDiv{\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n\r\n    .course-show{\r\n        width: 28%;\r\n        height: 350px;\r\n        box-shadow: 0 0 2px #cac6c6;\r\n        border-radius: 10px;\r\n        margin-right: 40px;\r\n        margin-bottom: 40px;\r\n        .course-show-top{\r\n            width: 100%;\r\n            height: 50%;\r\n            border-radius: 10px;\r\n            \r\n            img{\r\n                width: 100%;\r\n                height: 100%;\r\n                border-radius: 10px 10px 0px 0px;\r\n            }\r\n            \r\n        }\r\n        .course-show-content{\r\n            width: 93%;\r\n            height: 32%;\r\n            margin: 10px;\r\n          \r\n    \r\n            .couIntroduction{\r\n                display: -webkit-box;\r\n                -webkit-box-orient: vertical;   \r\n                -webkit-line-clamp: 2;\r\n                overflow: hidden;\r\n                font-size: 14px;\r\n                color: #464444;\r\n            }\r\n            .course-number{             \r\n                font-size: 14px;\r\n                color: #a5a5a5;\r\n                display: flex;\r\n                justify-content: space-between;\r\n            }\r\n        }\r\n        .course-show-bottom{\r\n            border-top: 1px solid #f0f0f0;\r\n            width: 100%;\r\n            height: 13%;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: flex-end;\r\n        }\r\n    }\r\n}\r\n\r\n.block{\r\n    margin-top: 20px;\r\n}\r\n/deep/.el-table{\r\n    .cell {\r\n        display: -webkit-box;\r\n        -webkit-box-orient: vertical;   \r\n        -webkit-line-clamp: 2;\r\n    }\r\n}\r\n.avatarUploader{\r\n    border: 1px dashed #d9d9d9;\r\n    width: 100px;\r\n    height: 80px;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n.avatar{\r\n    height: 80px;\r\n    width: 100px;\r\n}\r\n.avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    text-align: center;\r\n    width: 100px;\r\n    height: 80px;\r\n    line-height: 80px;\r\n  }\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}