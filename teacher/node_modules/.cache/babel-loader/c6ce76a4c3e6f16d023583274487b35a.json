{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      total: 0,\n      //分页总条数\n      pageNum: 1,\n      //页码\n      pageSize: 8,\n      //每页显示多少条数据\n      practiiceTitle: '',\n      //实践标题=>搜索框\n      tableData: [],\n      dialogVisibleEditPractice: false,\n      //修改线下实践弹窗\n      user: localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')) : {},\n      rulesPractice: {\n        //修改线下实践表单验证\n        praName: [{\n          required: true,\n          message: '请输入线下实践标题',\n          trigger: 'blur'\n        }],\n        praSite: [{\n          required: true,\n          message: '请输入线下实践地址',\n          trigger: 'blur'\n        }],\n        praMain: [{\n          required: true,\n          message: '请输入线下实践任务内容',\n          trigger: 'blur'\n        }]\n      },\n      form: {}\n    };\n  },\n  created() {\n    //console.log(this.user,'user')\n    this.load();\n  },\n  methods: {\n    load() {\n      this.request.get(\"/service-practice/practice/findpractice\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          teaId: this.user.teaId,\n          praName: this.practiiceTitle,\n          deleted: 0\n        }\n      }).then(res => {\n        console.log(res, 'res');\n        this.tableData = res.data.records;\n        this.total = res.data.total;\n      });\n    },\n    //每页显示多少条数据\n    handleSizeChange(pageSize) {\n      // console.log(pageSize)\n      this.pageSize = pageSize;\n      this.load();\n    },\n    //页码\n    handleCurrentChange(pageNum) {\n      // console.log(pageNum)\n      this.pageNum = pageNum;\n      this.load();\n    },\n    //刷新\n    reast() {\n      this.practiiceTitle = '', this.load();\n    },\n    //修改线下实践按钮\n    editPractice(row) {\n      this.dialogVisibleEditPractice = true;\n      this.form = row;\n    },\n    //修改线下实践弹窗确定按钮\n    savePractice() {\n      this.$refs['practiceFrom'].validate(valid => {\n        if (valid) {\n          this.request.post(\"/service-practice/practice\", this.form).then(res => {\n            if (res.code === '200') {\n              this.dialogVisibleEditPractice = false;\n              this.$message.success(\"修改线下实践成功！\");\n              this.load();\n            } else {\n              this.$message.success(\"修改线下实践失败！\");\n            }\n          });\n        }\n      });\n    },\n    //删除线下实践\n    deletePractice(praId) {\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.request.post(\"/service-practice/practice\", {\n          praId: praId,\n          deleted: 1\n        }).then(res => {\n          if (res.code === '200') {\n            this.$message.success(\"删除线下实践成功！\");\n            this.load();\n          } else {\n            this.$message.success(\"删除线下实践失败！\");\n          }\n        });\n      }).catch(() => {\n        this.$message.info('已取消删除');\n      });\n    },\n    //跳转到学生报名信息页面\n    student(row) {\n      //console.log(praId)\n      this.$router.push({\n        path: '/practiceStudent',\n        query: {\n          practiveData: JSON.stringify(row)\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";AAkFA;EACAA;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MACAC;QAAA;QACAC,UACA;UAAAC;UAAAC;UAAAC;QAAA,EACA;QACAC,UACA;UAAAH;UAAAC;UAAAC;QAAA,EACA;QACAE,UACA;UAAAJ;UAAAC;UAAAC;QAAA;MAEA;MACAG;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MACA;QACAC;UACAjB;UACAC;UACAiB;UACAX;UACAY;QACA;MACA;QACAC;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA,0BACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;QACA;UACA;YACA;cACA;cACA;cACA;YACA;cACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACAC;QACAC;QACAC;MACA;QACA,gDACA;UACAC;UACAX;QACA,EACA;UACA;YACA;YACA;UACA;YACA;UACA;QACA;MACA;QACA;MACA;IAEA;IACA;IACAY;MACA;MACA;QACAC;QACAC;UACAC;QACA;MACA;IACA;EACA;AACA","names":["data","total","pageNum","pageSize","practiiceTitle","tableData","dialogVisibleEditPractice","user","rulesPractice","praName","required","message","trigger","praSite","praMain","form","created","methods","load","params","teaId","deleted","console","handleSizeChange","handleCurrentChange","reast","editPractice","savePractice","deletePractice","confirmButtonText","cancelButtonText","type","praId","student","path","query","practiveData"],"sourceRoot":"src/views/Practice","sources":["practice.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"practice-top\">\r\n            <!-- 搜索 -->\r\n            <el-input style=\"width: 200px\" suffix-icon=\"el-icon-search\"  placeholder=\"请输入课程标题\" v-model=\"practiiceTitle\" @clear=\"load\" clearable></el-input>\r\n            <el-button style=\"margin-left: 10px\" type=\"primary\" @click=\"load\">搜索</el-button> \r\n             <!-- 刷新按钮 -->\r\n           <el-button size=\"mini\" style=\"margin-left: 10px\" type=\"primary\" @click=\"reast\"><i class=\"el-icon-refresh\"></i></el-button> \r\n        </div>\r\n        <!-- 线下实践表 -->\r\n        <el-table  \r\n            :header-cell-style=\"{ backgroundColor: 'rgb(244, 244, 245)' }\" \r\n            :data=\"tableData\" \r\n            border stripe>\r\n            \r\n            <el-table-column prop=\"praName\" label=\"实践标题\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"couName\" label=\"所属课程\" width=\"150\"></el-table-column>\r\n            <el-table-column prop=\"praMain\" label=\"任务内容\" width=\"180\"></el-table-column>\r\n            <el-table-column prop=\"praTime\" label=\"开始时间\" width=\"150\"> </el-table-column>\r\n            <el-table-column prop=\"praSite\" label=\"地址\" width=\"230\"> </el-table-column>\r\n            <el-table-column prop=\"\" label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                    <!-- 修改 线下实践按钮 -->\r\n                    <el-button type=\"primary\" @click=\"editPractice(scope.row)\"  icon=\"el-icon-edit\" ></el-button>\r\n                    <!--  删除 线下实践按钮-->\r\n\r\n                    <el-button type=\"danger\" @click=\"deletePractice(scope.row.praId)\" icon=\"el-icon-delete\" ></el-button>\r\n                 \r\n                    <!-- 查看报名学生信息 -->\r\n                    <el-button style=\"margin-left: 10px\" type=\"success\" @click=\"student(scope.row)\"  >\r\n                        <i class=\"el-icon-user\"></i>                      \r\n                    </el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <!-- 分页 -->\r\n        <div class=\"block\">\r\n            <el-pagination\r\n              @size-change=\"handleSizeChange\"\r\n              @current-change=\"handleCurrentChange\"\r\n              :current-page.=\"pageNum\"\r\n              :page-sizes=\"[8, 10, 12]\"\r\n              :page-size=\"pageSize\"\r\n              layout=\"total, sizes, prev, pager, next, jumper\"\r\n              :total=\"total\">\r\n            </el-pagination>\r\n        </div>\r\n\r\n        <!-- 修改线下实践弹窗 -->\r\n        <el-dialog\r\n            title=\"修改线下实践\"\r\n            :visible.sync=\"dialogVisibleEditPractice\"\r\n            width=\"30%\" center>\r\n            <el-form label-width=\"90px\" ref=\"practiceFrom\" :rules=\"rulesPractice\" :model=\"form\">\r\n                <el-form-item label=\"标题\" prop=\"praName\">\r\n                    <el-input style=\"width: 250px;\" v-model=\"form.praName\" placeholder=\"请输入标题\" clearable></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"地址\" prop=\"praSite\">\r\n                    <el-input style=\"width: 250px;\" v-model=\"form.praSite\" placeholder=\"请输入地址\" clearable></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"任务内容\" prop=\"praMain\">\r\n                    <el-input  \r\n                        style=\"width: 250px;\"\r\n                        type=\"textarea\" \r\n                        v-model=\"form.praMain\" \r\n                        placeholder=\"请输入任务内容\" \r\n                        autosize\r\n                        clearable>\r\n                    </el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            \r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogVisibleEditPractice = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"savePractice\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n\r\n    </div>\r\n</template>\r\n<script>\r\nexport default{\r\n    data () {\r\n        return {\r\n            total: 0, //分页总条数\r\n            pageNum: 1,//页码\r\n            pageSize: 8,//每页显示多少条数据\r\n            practiiceTitle: '',//实践标题=>搜索框\r\n            tableData: [],\r\n            dialogVisibleEditPractice: false,//修改线下实践弹窗\r\n            user: localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')) : {},\r\n            rulesPractice: {//修改线下实践表单验证\r\n                praName: [\r\n                    {required: true, message: '请输入线下实践标题', trigger: 'blur'},\r\n                ],\r\n                praSite: [\r\n                    {required: true, message: '请输入线下实践地址', trigger: 'blur'},\r\n                ],\r\n                praMain: [\r\n                    {required: true, message: '请输入线下实践任务内容', trigger: 'blur'},\r\n                ]\r\n            },\r\n            form: {},\r\n        }\r\n    },\r\n    created(){\r\n        //console.log(this.user,'user')\r\n        this.load()\r\n    },\r\n    methods: {\r\n        load(){\r\n            this.request.get(\"/service-practice/practice/findpractice\",{\r\n                params: {\r\n                    pageNum: this.pageNum,\r\n                    pageSize: this.pageSize,\r\n                    teaId: this.user.teaId,\r\n                    praName: this.practiiceTitle,\r\n                    deleted: 0,\r\n                }\r\n            }).then(res => {\r\n                console.log(res,'res')\r\n                this.tableData = res.data.records\r\n                this.total = res.data.total\r\n            })\r\n        },\r\n        //每页显示多少条数据\r\n        handleSizeChange(pageSize){\r\n            // console.log(pageSize)\r\n            this.pageSize = pageSize\r\n            this.load()\r\n        },\r\n        //页码\r\n        handleCurrentChange(pageNum){\r\n            // console.log(pageNum)\r\n            this.pageNum = pageNum\r\n            this.load()\r\n        },\r\n        //刷新\r\n        reast(){\r\n            this.practiiceTitle = '',\r\n            this.load()\r\n        },\r\n        //修改线下实践按钮\r\n        editPractice(row){\r\n            this.dialogVisibleEditPractice = true\r\n            this.form = row\r\n        },\r\n        //修改线下实践弹窗确定按钮\r\n        savePractice(){\r\n            this.$refs['practiceFrom'].validate((valid) => {\r\n                if(valid){\r\n                    this.request.post(\"/service-practice/practice\",this.form).then(res => {\r\n                        if(res.code === '200'){\r\n                            this.dialogVisibleEditPractice = false\r\n                            this.$message.success(\"修改线下实践成功！\")\r\n                            this.load()\r\n                        }else{\r\n                            this.$message.success(\"修改线下实践失败！\")\r\n                        }\r\n                    })\r\n                }\r\n            })      \r\n        },\r\n        //删除线下实践\r\n        deletePractice(praId){\r\n            this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                this.request.post(\"/service-practice/practice\",\r\n                    {\r\n                        praId: praId,\r\n                        deleted: 1,\r\n                    }\r\n                ).then(res => {\r\n                    if (res.code === '200') {\r\n                        this.$message.success(\"删除线下实践成功！\")\r\n                        this.load()\r\n                    } else {\r\n                        this.$message.success(\"删除线下实践失败！\")\r\n                    }\r\n                })\r\n            }).catch(() => {\r\n                this.$message.info('已取消删除')\r\n            });\r\n           \r\n        },\r\n        //跳转到学生报名信息页面\r\n        student(row){\r\n            //console.log(praId)\r\n            this.$router.push({\r\n                path: '/practiceStudent',\r\n                query: {\r\n                    practiveData: JSON.stringify(row)\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.practice-top{\r\n    margin-bottom: 20px;\r\n    margin-top: -10px;\r\n}\r\n/deep/.el-table{\r\n    .cell {\r\n        display: -webkit-box;\r\n        -webkit-box-orient: vertical;   \r\n        -webkit-line-clamp: 2;\r\n        overflow: hidden;\r\n    }\r\n}\r\n.block{\r\n    margin-top: 20px;\r\n}\r\n.el-form{\r\n    \r\n        .el-form-item__label{\r\n            text-align: none;\r\n        \r\n    }\r\n  \r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}