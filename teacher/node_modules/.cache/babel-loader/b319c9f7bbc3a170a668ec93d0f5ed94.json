{"ast":null,"code":"export default {\n  data() {\n    return {\n      pageNum: 1,\n      //页码\n      pageSize: 100,\n      //每页显示多少条数据\n      total: 0,\n      problemData: {},\n      //咨询数据\n      commentData: [],\n      deliverProblem: '',\n      //发布评论输入框\n      user: localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')) : {}\n    };\n  },\n  created() {\n    this.problemData = JSON.parse(this.$route.query.problemData); //获取从咨询管理传过来的\n    this.load();\n  },\n  methods: {\n    load() {\n      this.request.get(\"service-comment/topicQuestion/tqUserPage\", {\n        params: {\n          answeredTqId: this.problemData.tqId,\n          pageSize: this.pageSize,\n          pageNum: this.pageNum\n        }\n      }).then(res => {\n        console.log(res);\n        this.commentData = res.data.records;\n        this.total = res.data.total;\n      });\n    },\n    //每页显示多少条数据\n    handleSizeChange(pageSize) {\n      // console.log(pageSize)\n      this.pageSize = pageSize;\n      this.load();\n    },\n    //页码\n    handleCurrentChange(pageNum) {\n      // console.log(pageNum)\n      this.pageNum = pageNum;\n      this.load();\n    },\n    //回复问题\n    addAnswer() {\n      this.request.post(\"/service-comment/topicQuestion\", {\n        uid: this.user.id,\n        truename: this.user.truename,\n        content: this.deliverProblem,\n        answeredTqId: this.problemData.tqId\n      }).then(res => {\n        if (res.code === '200') {\n          this.$message.success(\"发布成功！\");\n          this.load();\n        } else {\n          this.$message.error(\"发布失败！\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AA0EA;EACAA;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;IACA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MACA;QACAC;UACAC;UACAV;UACAD;QACA;MACA;QACAY;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;QACAC;QACAC;QACAC;QACAP;MACA;QACA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;EAEA;AACA","names":["data","pageNum","pageSize","total","problemData","commentData","deliverProblem","user","created","methods","load","params","answeredTqId","console","handleSizeChange","handleCurrentChange","addAnswer","uid","truename","content"],"sourceRoot":"src/views/Find","sources":["ProblemDetial.vue"],"sourcesContent":["<template>\r\n    <div >\r\n        <!-- 返回问题页面 -->\r\n        <p class=\"returnProblem\" @click=\"$router.push(\r\n            {\r\n                path: '/find', \r\n                query: {\r\n                    q: 'second'\r\n                }\r\n            })\">\r\n            <i class=\"el-icon-back\"></i>  返回\r\n        </p>\r\n\r\n        <!-- 问题详情 -->\r\n        <div class=\"Problem\">\r\n            <div class=\"Problem-top\">\r\n                <!-- 标题 -->\r\n                <h3> {{problemData.content}}</h3>\r\n                <!-- 作者 -->\r\n                <span >{{problemData.truename}}</span>\r\n                <!-- 发布日期 -->\r\n                <span style=\"margin-left: 20px;\">{{problemData.createTime}}</span>   \r\n            </div>\r\n            <div >\r\n                <!-- 问题内容 -->\r\n                <!-- <p>{{problemData.content}}</p> -->\r\n            </div>    \r\n        </div> \r\n\r\n        \r\n        <div class=\"comment\" >\r\n           <!-- 发布评论 -->\r\n            <div class=\"deliverProblem\">\r\n                <el-form>\r\n                    <el-input  size=\"medium\" v-model=\"deliverProblem\" placeholder=\"请输入问题回复\"></el-input>\r\n                    <el-button size=\"medium\"  type=\"primary\" @click=\"addAnswer\">发布</el-button>\r\n                </el-form>\r\n            </div>\r\n            <p>全部回答</p>\r\n            <el-empty  v-if=\"commentData.length === 0\" description=\"暂无回答\"></el-empty>\r\n            <div class=\"comment-content\" v-else v-for=\"item in commentData\" :key=\"item.index\">\r\n                <div class=\"commen-content-top\">\r\n                    <div class=\"img\">\r\n                        <el-avatar :src=\"item.avatar\" ></el-avatar>\r\n                    </div>\r\n                    <div class=\"text\">\r\n                        <p >{{item.truename}} </p>\r\n                        <p class=\"time\" >{{item.createTime}}</p>\r\n                    </div>\r\n                </div>\r\n                <!-- 评论内容 -->\r\n                <div class=\"comment-content-bottom\">\r\n                    <p>{{item.content}}</p>\r\n                </div>\r\n            </div>\r\n            <!-- 分页 -->\r\n            <!-- <div v-if=\"commentData.length !== 0\" class=\"block\">\r\n                <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page.=\"pageNum\"\r\n                :page-sizes=\"[7, 10, 13]\"\r\n                :page-size=\"pageSize\"\r\n                layout=\" total, sizes, prev, pager, next, jumper\"\r\n                :total=\"total\"\r\n                >\r\n                </el-pagination>\r\n            </div>  -->\r\n        </div>\r\n       \r\n        \r\n    </div>\r\n</template>\r\n<script>\r\nexport default{\r\n    data () {\r\n        return {\r\n            pageNum: 1,//页码\r\n            pageSize: 100,//每页显示多少条数据\r\n            total: 0,\r\n            problemData: {},//咨询数据\r\n            commentData: [],\r\n            deliverProblem: '',//发布评论输入框\r\n            user: localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')) : {}\r\n        }\r\n    },\r\n    created(){\r\n        this.problemData = JSON.parse(this.$route.query.problemData); //获取从咨询管理传过来的\r\n        this.load()\r\n    },\r\n    methods: {\r\n        load(){\r\n            this.request.get(\"service-comment/topicQuestion/tqUserPage\",{\r\n                params: {\r\n                    answeredTqId: this.problemData.tqId,\r\n                    pageSize: this.pageSize,\r\n                    pageNum: this.pageNum,\r\n                }\r\n            }).then(res => {\r\n                console.log(res)\r\n                this.commentData = res.data.records\r\n                this.total = res.data.total\r\n            })\r\n        },\r\n         //每页显示多少条数据\r\n         handleSizeChange(pageSize){\r\n            // console.log(pageSize)\r\n            this.pageSize = pageSize\r\n            this.load()\r\n        },\r\n        //页码\r\n        handleCurrentChange(pageNum){\r\n            // console.log(pageNum)\r\n            this.pageNum = pageNum\r\n            this.load()\r\n        },\r\n        //回复问题\r\n        addAnswer(){\r\n            this.request.post(\"/service-comment/topicQuestion\",{\r\n                uid: this.user.id,\r\n                truename: this.user.truename,\r\n                content: this.deliverProblem,\r\n                answeredTqId: this.problemData.tqId,\r\n            }).then(res => {\r\n                if(res.code === '200'){\r\n                    this.$message.success(\"发布成功！\")\r\n                    this.load()\r\n                }else{\r\n                    this.$message.error(\"发布失败！\")\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.returnProblem{\r\n    cursor: pointer;\r\n    margin-left: 20px;\r\n}\r\n//咨询详情\r\n.Problem{\r\n    width: 60%;\r\n    box-shadow: 0 0 3px #cac6c6;\r\n    margin: auto;\r\n    padding: 20px 20px 20px 20px;\r\n    .Problem-top{\r\n        height: 65px;\r\n       \r\n        h3{\r\n            margin-bottom: 10px;\r\n        }\r\n        span{\r\n            color:rgb(170, 170, 170);\r\n            font-size: 14px;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n//评论\r\n.comment{\r\n    width: 60%;\r\n    box-shadow: 0 0 3px #cac6c6;\r\n    margin: auto;\r\n    padding: 20px 20px 20px 20px;\r\n    margin-top: 20px;\r\n    //发布评论\r\n    .deliverProblem{\r\n        .el-input{\r\n            width: 88%;\r\n            margin-right:20px ;\r\n            padding: 0;\r\n        }\r\n    }\r\n    .comment-content{\r\n        margin-bottom: 10px;\r\n        border-bottom: 2px solid #f0f0f0;\r\n        .commen-content-top{\r\n            height: 70px;\r\n            display: flex;\r\n            align-items: center;\r\n            .img .el-avatar{\r\n                width: 70px;\r\n                height: 70px;\r\n            }\r\n            .text{\r\n                border: none;\r\n                min-height: 0;\r\n                margin-left: 20px;\r\n                p{\r\n                    color:#E6A23C\r\n                }\r\n                .time{\r\n                    color:rgb(170, 170, 170);\r\n                    font-size: 14px;\r\n                    margin-bottom: 10px;\r\n                }\r\n            }\r\n        }\r\n        .comment-content-bottom{\r\n            margin-top: 10px;\r\n            p{\r\n                margin: 0px 10px 10px 90px;\r\n            }\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}