{"ast":null,"code":"export default {\n  data() {\n    return {\n      //获取班级-课程列表的参数对象\n      queryInfo: {\n        classId: '',\n        // 当前的页数\n        pageNum: 1,\n        // 当当前每页显示多少条数据\n        pageSize: 6,\n        couId: '',\n        couName: ''\n      },\n      condition: '',\n      search: '',\n      queryfindCourse: {\n        classId: '',\n        couName: '',\n        pageSize: 3,\n        pageNum: 1,\n        deleted: 0\n      },\n      findCourse: [],\n      courslist: [],\n      total: 0,\n      // 控制添加班级-课程对话框的显示与隐藏\n      addDialogVisible: false,\n      // 添加班级-课程的表单数据\n      addForm: {\n        couName: ''\n      },\n      // 添加表单的验证规则对象\n      addFormRules: {\n        couName: [{\n          required: true,\n          message: '请输入课程名称',\n          trigger: 'blur'\n        }]\n      },\n      restaurants: [],\n      timeout: null,\n      classIN: {\n        classId: '',\n        className: ''\n      },\n      findCourseOb: [],\n      addCourse: {\n        classId: '',\n        couId: ''\n      },\n      DXcondition: '',\n      tableData: [],\n      DXtotal: ''\n    };\n  },\n  created() {\n    const classIN = this.$route.query;\n    // console.log(classIN);\n    if (classIN) {\n      // var 参数 = query.参数名;\n      this.classIN = classIN;\n      this.queryInfo.classId = this.classIN.classId;\n      // console.log(this.queryInfo)\n      this.addCourse.classId = this.classIN.classId;\n      this.queryfindCourse.classId = this.classIN.classId;\n    }\n    this.getCoursList();\n    this.getfindCourse();\n  },\n  methods: {\n    //查询所有可选择的课程\n    getfindCourse() {\n      if (this.DXcondition == '') {\n        console.log(this.queryfindCourse, \"queryfindCourse\");\n        this.request.get('/service-class/class/findCourse', {\n          params: this.queryfindCourse\n        }).then(res => {\n          if (res.code === '200') {\n            this.tableData = res.data.records;\n            console.log(this.tableData, \"tableData\");\n            this.DXtotal = res.data.total;\n          } else {\n            this.$message.error(\"获取可选班级信息失败！\");\n          }\n        });\n      } else if (this.DXcondition != '') {\n        console.log(this.DXcondition, \"DXcondition\");\n        this.queryfindCourse.couName = this.DXcondition;\n        this.request.get('/service-class/class/findCourse', {\n          params: this.queryfindCourse\n        }).then(res => {\n          if (res.code === '200') {\n            this.tableData = res.data.records;\n            console.log(this.tableData, \"tableData\");\n            this.DXtotal = res.data.total;\n          } else {\n            this.$message.error(\"获取可选班级信息失败！\");\n          }\n        });\n      }\n    },\n    //添加课程的搜索框清除\n    tonullCondition() {\n      this.queryfindCourse.couName = '';\n      this.DXcondition = '';\n      this.getfindCourse();\n    },\n    //查询该班级已经添加的课程\n    getCoursList() {\n      this.search = this.condition;\n      if (this.search === '') {\n        this.queryInfo.couName = '';\n        this.queryInfo.couId = '';\n        this.request.get('/service-class/class/findClassCourse', {\n          params: this.queryInfo\n        }).then(res => {\n          if (res.code === '200') {\n            this.courslist = res.data.records;\n            console.log(this.courslist, \"courslist\");\n            this.total = res.data.total;\n          } else {\n            this.$message.error(\"获取\" + this.classIN.className + \"课程列表失败！\");\n          }\n        });\n      } else if (this.search !== '') {\n        this.queryInfo.couId = this.search;\n        this.queryInfo.pageSize = 6;\n        this.queryInfo.pageNum = 1;\n        this.request.get('/service-class/class/findClassCourse', {\n          params: this.queryInfo\n        }).then(res => {\n          if (res.code === '200') {\n            this.courslist = res.data.records;\n            if (this.courslist.length === 0) {\n              this.queryInfo.couId = '';\n              this.queryInfo.couName = this.search;\n              this.request.get('/service-class/class/findClassCourse', {\n                params: this.queryInfo\n              }).then(res => {\n                if (res.code === '200') {\n                  this.courslist = res.data.records;\n                  this.total = res.data.total;\n                  if (this.courslist.length === 0) {\n                    this.$message.info(\"搜索结果为空！\");\n                  }\n                } else {\n                  this.$message.error(\"获取课程列表失败！\");\n                }\n              });\n            } else {\n              this.total = res.data.total;\n              if (this.courslist.length === 0) {\n                this.$message.info(\"搜索结果为空！\");\n              }\n            }\n          } else {\n            this.$message.error(\"获取课程数据失败！\");\n          }\n        });\n      }\n    },\n    togetCouList() {\n      this.condition = '';\n      this.getCoursList();\n    },\n    // 点击按钮，添加新班级-课程\n    addCours() {\n      console.log(this.multipleSelection, \"multipleSelection\");\n      for (let i = 0; i < this.multipleSelection.length; i++) {\n        this.multipleSelection[i].classId = this.addCourse.classId;\n      }\n      console.log(this.multipleSelection, \"multipleSelection\");\n      let total = this.multipleSelection.map(v => ({\n        classId: v.classId,\n        couId: v.couId\n      }));\n      console.log(total);\n      this.request.post('/service-course/course/saveBatch', total).then(res => {\n        if (res.code === '200') {\n          this.$message.success(\"添加课程成功！\");\n          this.getfindCourse();\n          this.getCoursList();\n        }\n      });\n    },\n    loadAll() {\n      return this.findCourseOb;\n    },\n    querySearchAsync(queryString, cb) {\n      var restaurants = this.restaurants;\n      var results = queryString ? restaurants.filter(this.createStateFilter(queryString)) : restaurants;\n      clearTimeout(this.timeout);\n      this.timeout = setTimeout(() => {\n        cb(results);\n      }, 3000 * Math.random());\n    },\n    createStateFilter(queryString) {\n      return state => {\n        return state.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    },\n    handleSelect(item) {\n      // console.log(item,\"item\");\n      this.addCourse.couId = item.id + '';\n      // console.log(this.addCourse)\n    },\n\n    // 监听添加班级-课程对话框的关闭事件\n    addDialogClosed() {\n      this.$refs.addFormRef.resetFields();\n    },\n    // 监听pagesize改变的事件\n    handleSizeChange(newSize) {\n      // console.log(newSize)\n      this.queryInfo.pageSize = newSize;\n      this.getCoursList();\n    },\n    // 监听页码值改变的事件\n    handleCurrentChange(newPage) {\n      // console.log(newPage)\n      this.queryInfo.pageNum = newPage;\n      this.getCoursList();\n    },\n    // 监听pagesize改变的事件\n    handleSizeChangeDX(newSize) {\n      // console.log(newSize)\n      this.queryfindCourse.pageSize = newSize;\n      this.getfindCourse();\n    },\n    // 监听页码值改变的事件\n    handleCurrentChangeDX(newPage) {\n      // console.log(newPage)\n      this.queryfindCourse.pageNum = newPage;\n      console.log(this.queryfindCourse.pageNum, \"pageNum\");\n      this.getfindCourse();\n    },\n    // 根据cou_id,class_id删除对应的班级-课程信息\n    async removeCoursById(id) {\n      // console.log(id)\n      const confirmResult = await this.$confirm('此操作将永久删除该班级, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).catch(err => err);\n      // 如果用户确认删除，则返回值为字符串:confirm\n      // 如果用户取消了删除，则返回值为字符串:cancel\n      // console.log(confirmResult)\n      if (confirmResult === 'cancel') {\n        return this.$message.info('已取消删除');\n      }\n      if (confirmResult === 'confirm') {\n        this.request.delete('/service-course/course/leaveCourse/' + id).then(res => {\n          // console.log(res,\"res\")\n          if (res.code === '200') {\n            this.$message.success(\"删除成功！\");\n            this.getCoursList();\n          } else {\n            this.$message.error(\"删除失败！\");\n          }\n        });\n      }\n    },\n    toggleSelection(rows) {\n      if (rows) {\n        rows.forEach(row => {\n          this.$refs.multipleTable.toggleRowSelection(row);\n        });\n      } else {\n        this.$refs.multipleTable.clearSelection();\n      }\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    }\n  },\n  mounted() {\n    this.restaurants = this.loadAll();\n    // console.log(this.findCourseOb,'mounted')\n  }\n};","map":{"version":3,"mappings":"AA6GA;EACAA;IACA;MACA;MACAC;QACAC;QACA;QACAC;QACA;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;QACAP;QACAI;QACAF;QACAD;QACAO;MACA;MACAC;MACAC;MACAC;MACA;MACAC;MACA;MACAC;QACAT;MACA;MACA;MACAU;QACAV,UACA;UAAAW;UAAAC;UAAAC;QAAA;MAEA;MACAC;MACAC;MACAC;QACApB;QACAqB;MACA;MACAC;MACAC;QACAvB;QACAG;MACA;MACAqB;MACAC;MACAC;IACA;EACA;EAEAC;IACA;IACA;IACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACA;EACA;EACAC;IACA;IACAC;MACA;QACAC;QACA;UACAC;QACA;UACA;YACA;YACAD;YACA;UACA;YACA;UACA;QACA;MACA;QACAA;QACA;QACA;UACAC;QACA;UACA;YACA;YACAD;YACA;UACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAE;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACA;QACA;QACA;UACAF;QACA;UACA;YACA;YACAD;YACA;UACA;YACA;UACA;QACA;MACA;QACA;QACA;QACA;QACA;UACAC;QACA;UACA;YACA;YACA;cACA;cACA;cACA;gBACAA;cACA;gBACA;kBACA;kBACA;kBACA;oBACA;kBACA;gBACA;kBACA;gBACA;cACA;YACA;cACA;cACA;gBACA;cACA;YACA;UACA;YACA;UACA;QACA;MACA;IAEA;IACAG;MACA;MACA;IACA;IACA;IACAC;MACAL;MACA;QACA;MACA;MACAA;MACA;QAAA9B;QAAAG;MAAA;MACA2B;MACA;QACA;UACA;UACA;UACA;QAEA;MACA;IACA;IACAM;MACA;IACA;IACAC;MACA;MACA;MAEAC;MACA;QACAC;MACA;IACA;IACAC;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACAhB;MACA;IACA;IACA;IACA;MACA;MACA;QACAiB;QACAC;QACAC;MACA;MACA;MACA;MACA;MACA;QACA;MACA;MACA;QACA;UACA;UACA;YACA;YACA;UACA;YACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACAC;UACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACA;IACA;EACA;AACA","names":["data","queryInfo","classId","pageNum","pageSize","couId","couName","condition","search","queryfindCourse","deleted","findCourse","courslist","total","addDialogVisible","addForm","addFormRules","required","message","trigger","restaurants","timeout","classIN","className","findCourseOb","addCourse","DXcondition","tableData","DXtotal","created","methods","getfindCourse","console","params","tonullCondition","getCoursList","togetCouList","addCours","loadAll","querySearchAsync","clearTimeout","cb","createStateFilter","handleSelect","addDialogClosed","handleSizeChange","handleCurrentChange","handleSizeChangeDX","handleCurrentChangeDX","confirmButtonText","cancelButtonText","type","toggleSelection","rows","handleSelectionChange","mounted"],"sourceRoot":"src/views/class","sources":["coursG.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <!-- 搜索与添加区域 -->\r\n        <div class=\"coursG-top\">\r\n            <!-- 跳转到班级管理 -->\r\n            <el-page-header @back=\"$router.push('/classes')\" :content=\"this.classIN.className\"></el-page-header>\r\n            <!-- 搜索与添加区域 -->\r\n            <el-row :gutter=\"30\">\r\n                <el-col :span=\"5\">\r\n                    <el-input placeholder=\"请输入内容\" v-model=\"condition\" clearable @clear=\"togetCouList\">\r\n                        <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getCoursList\"></el-button>\r\n                    </el-input>\r\n                </el-col>\r\n                <el-col :span=\"4\">\r\n                    <el-button type=\"primary\" @click=\"addDialogVisible = true\">添加课程</el-button>\r\n                </el-col>\r\n            </el-row>\r\n        </div>\r\n\r\n        <!-- 班级列表区域 -->\r\n        <el-table :header-cell-style=\"{ backgroundColor: 'rgb(244, 244, 245)' }\" :data=\"courslist\" border stripe>\r\n            <el-table-column prop=\"couName\" label=\"课程名称\"></el-table-column>\r\n            <el-table-column prop=\"couType\" label=\"课程类型\">\r\n              <template scope=\"scope\">\r\n                <p v-if=\"scope.row.couType=='1'\">康复</p>\r\n                <p v-if=\"scope.row.couType=='2'\">护理</p>\r\n                <p v-if=\"scope.row.couType=='3'\">养生</p>\r\n                <p v-if=\"scope.row.couType=='4'\">科普</p>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"couChileType\" label=\"课程类别\">\r\n              <template scope=\"scope\">\r\n                <p v-if=\"scope.row.couType=='1'&scope.row.couChileType=='1'\">老年疾病康复</p>\r\n                <p v-if=\"scope.row.couType=='1'&scope.row.couChileType=='2'\">儿科疾病康复</p>\r\n                <p v-if=\"scope.row.couType=='1'&scope.row.couChileType=='3'\">运动创伤康复</p>\r\n                <p v-if=\"scope.row.couType=='1'&scope.row.couChileType=='4'\">神经系统疾病康复</p>\r\n                <p v-if=\"scope.row.couType=='1'&scope.row.couChileType=='5'\">其他康复\r\n\r\n                <p v-if=\"scope.row.couType=='2'&scope.row.couChileType=='1'\">老年护理</p>\r\n                <p v-if=\"scope.row.couType=='2'&scope.row.couChileType=='2'\">儿童护理</p>\r\n                <p v-if=\"scope.row.couType=='2'&scope.row.couChileType=='3'\">内科护理</p>\r\n                <p v-if=\"scope.row.couType=='2'&scope.row.couChileType=='4'\">外科护理</p>\r\n                <p v-if=\"scope.row.couType=='2'&scope.row.couChileType=='5'\">其他护理</p>\r\n\r\n                <p v-if=\"scope.row.couType=='3'&scope.row.couChileType=='1'\">饮食保健</p>\r\n                <p v-if=\"scope.row.couType=='3'&scope.row.couChileType=='2'\">运动保健</p>\r\n                <p v-if=\"scope.row.couType=='3'&scope.row.couChileType=='3'\">中医针灸推拿养生</p>\r\n                <p v-if=\"scope.row.couType=='3'&scope.row.couChileType=='4'\">其他</p>\r\n\r\n                <p v-if=\"scope.row.couType=='4'&scope.row.couChileType=='1'\">急救</p>\r\n                <p v-if=\"scope.row.couType=='4'&scope.row.couChileType=='2'\">传染病</p>\r\n                <p v-if=\"scope.row.couType=='4'&scope.row.couChileType=='3'\">其他</p>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"teaName\" label=\"课程作者\"></el-table-column>\r\n            <el-table-column prop=\"couIntroduction\" label=\"课程简介\" width=\"400rpx\"></el-table-column>\r\n            <el-table-column prop=\"couChaNum\" label=\"课程章节数\"></el-table-column>\r\n            <el-table-column prop=\"couPrice\" label=\"课程价格\"></el-table-column>\r\n            <el-table-column prop=\"joinDate\" label=\"加入时间\"></el-table-column>\r\n            <el-table-column prop=\"operation\" label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                    <!-- 删除按钮 -->\r\n                    <el-button type=\"danger\" icon=\"el-icon-delete\" @click=\"removeCoursById(scope.row.id)\">\r\n                    </el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <!-- 分页区域 -->\r\n        <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n            :current-page=\"queryInfo.pageNum\" :page-sizes=\"[1, 4, 6]\" :page-size=\"queryInfo.pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n        </el-pagination>\r\n        <!-- 添加班级-课程的对话框 -->\r\n        <el-dialog title=\"添加课程\" :visible.sync=\"addDialogVisible\" width=\"80%\" @close=\"addDialogClosed\">\r\n            <!-- 内容主体区域 -->\r\n            <!-- 搜索框 -->\r\n            <el-input placeholder=\"请输入想要搜索课程的名称\" v-model=\"DXcondition\" clearable @clear=\"tonullCondition\">\r\n                <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getfindCourse\"></el-button>\r\n            </el-input>\r\n            <!-- 多选表格 -->\r\n            <el-table ref=\"multipleTable\" :data=\"tableData\" tooltip-effect=\"dark\" style=\"width: 100%\"\r\n                @selection-change=\"handleSelectionChange\">\r\n                <el-table-column type=\"selection\" width=\"55\">\r\n                </el-table-column>\r\n                <el-table-column label=\"课程Id\" width=\"120\">\r\n                    <template slot-scope=\"scope\">{{ scope.row.couId }}</template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"couName\" label=\"课程名称\" width=\"120\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"teaName\" label=\"作者\" width=\"120\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"couIntroduction\" label=\"简介\" width=\"600\">\r\n                </el-table-column>\r\n            </el-table>\r\n            <!-- 分页区域 -->\r\n            <el-pagination @size-change=\"handleSizeChangeDX\" @current-change=\"handleCurrentChangeDX\"\r\n                :current-page=\"queryfindCourse.pageNum\" :page-size=\"queryfindCourse.pageSize\"\r\n                layout=\"total, prev, pager, next\" :total=\"DXtotal\">\r\n            </el-pagination>\r\n            <!-- 底部区域 -->\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"addCours\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            //获取班级-课程列表的参数对象\r\n            queryInfo: {\r\n                classId: '',\r\n                // 当前的页数\r\n                pageNum: 1,\r\n                // 当当前每页显示多少条数据\r\n                pageSize: 6,\r\n                couId: '',\r\n                couName: ''\r\n            },\r\n            condition: '',\r\n            search: '',\r\n            queryfindCourse: {\r\n                classId: '',\r\n                couName: '',\r\n                pageSize: 3,\r\n                pageNum: 1,\r\n                deleted: 0\r\n            },\r\n            findCourse: [],\r\n            courslist: [],\r\n            total: 0,\r\n            // 控制添加班级-课程对话框的显示与隐藏\r\n            addDialogVisible: false,\r\n            // 添加班级-课程的表单数据\r\n            addForm: {\r\n                couName: ''\r\n            },\r\n            // 添加表单的验证规则对象\r\n            addFormRules: {\r\n                couName: [\r\n                    { required: true, message: '请输入课程名称', trigger: 'blur' }\r\n                ]\r\n            },\r\n            restaurants: [],\r\n            timeout: null,\r\n            classIN: {\r\n                classId: '',\r\n                className: ''\r\n            },\r\n            findCourseOb: [],\r\n            addCourse: {\r\n                classId: '',\r\n                couId: ''\r\n            },\r\n            DXcondition: '',\r\n            tableData: [],\r\n            DXtotal: ''\r\n        }\r\n    },\r\n\r\n    created() {\r\n        const classIN = this.$route.query;\r\n        // console.log(classIN);\r\n        if (classIN) {\r\n            // var 参数 = query.参数名;\r\n            this.classIN = classIN\r\n            this.queryInfo.classId = this.classIN.classId\r\n            // console.log(this.queryInfo)\r\n            this.addCourse.classId = this.classIN.classId\r\n            this.queryfindCourse.classId = this.classIN.classId\r\n        }\r\n        this.getCoursList()\r\n        this.getfindCourse()\r\n    },\r\n    methods: {\r\n        //查询所有可选择的课程\r\n        getfindCourse() {\r\n            if (this.DXcondition == '') {\r\n                console.log(this.queryfindCourse, \"queryfindCourse\")\r\n                this.request.get('/service-class/class/findCourse', {\r\n                    params: this.queryfindCourse\r\n                }).then(res => {\r\n                    if (res.code === '200') {\r\n                        this.tableData = res.data.records\r\n                        console.log(this.tableData, \"tableData\")\r\n                        this.DXtotal = res.data.total\r\n                    } else {\r\n                        this.$message.error(\"获取可选班级信息失败！\")\r\n                    }\r\n                })\r\n            } else if (this.DXcondition != '') {\r\n                console.log(this.DXcondition, \"DXcondition\")\r\n                this.queryfindCourse.couName = this.DXcondition\r\n                this.request.get('/service-class/class/findCourse', {\r\n                    params: this.queryfindCourse\r\n                }).then(res => {\r\n                    if (res.code === '200') {\r\n                        this.tableData = res.data.records\r\n                        console.log(this.tableData, \"tableData\")\r\n                        this.DXtotal = res.data.total\r\n                    } else {\r\n                        this.$message.error(\"获取可选班级信息失败！\")\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        //添加课程的搜索框清除\r\n        tonullCondition() {\r\n            this.queryfindCourse.couName = ''\r\n            this.DXcondition = ''\r\n            this.getfindCourse()\r\n        },\r\n        //查询该班级已经添加的课程\r\n        getCoursList() {\r\n            this.search = this.condition\r\n            if (this.search === '') {\r\n                this.queryInfo.couName = ''\r\n                this.queryInfo.couId = ''\r\n                this.request.get('/service-class/class/findClassCourse', {\r\n                    params: this.queryInfo\r\n                }).then(res => {\r\n                    if (res.code === '200') {\r\n                        this.courslist = res.data.records\r\n                        console.log(this.courslist,\"courslist\")\r\n                        this.total = res.data.total\r\n                    } else {\r\n                        this.$message.error(\"获取\" + this.classIN.className + \"课程列表失败！\")\r\n                    }\r\n                })\r\n            } else if (this.search !== '') {\r\n                this.queryInfo.couId = this.search\r\n                this.queryInfo.pageSize = 6\r\n                this.queryInfo.pageNum = 1\r\n                this.request.get('/service-class/class/findClassCourse', {\r\n                    params: this.queryInfo\r\n                }).then(res => {\r\n                    if (res.code === '200') {\r\n                        this.courslist = res.data.records\r\n                        if (this.courslist.length === 0) {\r\n                            this.queryInfo.couId = ''\r\n                            this.queryInfo.couName = this.search\r\n                            this.request.get('/service-class/class/findClassCourse', {\r\n                                params: this.queryInfo\r\n                            }).then(res => {\r\n                                if (res.code === '200') {\r\n                                    this.courslist = res.data.records\r\n                                    this.total = res.data.total\r\n                                    if (this.courslist.length === 0) {\r\n                                        this.$message.info(\"搜索结果为空！\")\r\n                                    }\r\n                                } else {\r\n                                    this.$message.error(\"获取课程列表失败！\")\r\n                                }\r\n                            })\r\n                        } else {\r\n                            this.total = res.data.total\r\n                            if (this.courslist.length === 0) {\r\n                                this.$message.info(\"搜索结果为空！\")\r\n                            }\r\n                        }\r\n                    } else {\r\n                        this.$message.error(\"获取课程数据失败！\")\r\n                    }\r\n                })\r\n            }\r\n\r\n        },\r\n        togetCouList() {\r\n            this.condition = ''\r\n            this.getCoursList()\r\n        },\r\n        // 点击按钮，添加新班级-课程\r\n        addCours() {\r\n            console.log(this.multipleSelection, \"multipleSelection\")\r\n            for (let i = 0; i < this.multipleSelection.length; i++) {\r\n                this.multipleSelection[i].classId = this.addCourse.classId\r\n            }\r\n            console.log(this.multipleSelection, \"multipleSelection\")\r\n            let total = this.multipleSelection.map(v => ({ classId: v.classId, couId: v.couId }))\r\n            console.log(total)\r\n            this.request.post('/service-course/course/saveBatch', total).then(res => {\r\n                if (res.code === '200') {\r\n                    this.$message.success(\"添加课程成功！\")\r\n                    this.getfindCourse()\r\n                    this.getCoursList()\r\n\r\n                }\r\n            })\r\n        },\r\n        loadAll() {\r\n            return this.findCourseOb;\r\n        },\r\n        querySearchAsync(queryString, cb) {\r\n            var restaurants = this.restaurants;\r\n            var results = queryString ? restaurants.filter(this.createStateFilter(queryString)) : restaurants;\r\n\r\n            clearTimeout(this.timeout);\r\n            this.timeout = setTimeout(() => {\r\n                cb(results);\r\n            }, 3000 * Math.random());\r\n        },\r\n        createStateFilter(queryString) {\r\n            return (state) => {\r\n                return (state.value.toLowerCase().indexOf(queryString.toLowerCase()) === 0);\r\n            };\r\n        },\r\n        handleSelect(item) {\r\n            // console.log(item,\"item\");\r\n            this.addCourse.couId = item.id + ''\r\n            // console.log(this.addCourse)\r\n        },\r\n        // 监听添加班级-课程对话框的关闭事件\r\n        addDialogClosed() {\r\n            this.$refs.addFormRef.resetFields()\r\n        },\r\n        // 监听pagesize改变的事件\r\n        handleSizeChange(newSize) {\r\n            // console.log(newSize)\r\n            this.queryInfo.pageSize = newSize\r\n            this.getCoursList()\r\n        },\r\n        // 监听页码值改变的事件\r\n        handleCurrentChange(newPage) {\r\n            // console.log(newPage)\r\n            this.queryInfo.pageNum = newPage\r\n            this.getCoursList()\r\n        },\r\n        // 监听pagesize改变的事件\r\n        handleSizeChangeDX(newSize) {\r\n            // console.log(newSize)\r\n            this.queryfindCourse.pageSize = newSize\r\n            this.getfindCourse()\r\n        },\r\n        // 监听页码值改变的事件\r\n        handleCurrentChangeDX(newPage) {\r\n            // console.log(newPage)\r\n            this.queryfindCourse.pageNum = newPage\r\n            console.log(this.queryfindCourse.pageNum, \"pageNum\")\r\n            this.getfindCourse()\r\n        },\r\n        // 根据cou_id,class_id删除对应的班级-课程信息\r\n        async removeCoursById(id) {\r\n            // console.log(id)\r\n            const confirmResult = await this.$confirm('此操作将永久删除该班级, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).catch(err => err)\r\n            // 如果用户确认删除，则返回值为字符串:confirm\r\n            // 如果用户取消了删除，则返回值为字符串:cancel\r\n            // console.log(confirmResult)\r\n            if (confirmResult === 'cancel') {\r\n                return this.$message.info('已取消删除')\r\n            }\r\n            if (confirmResult === 'confirm') {\r\n                this.request.delete('/service-course/course/leaveCourse/' + id).then(res => {\r\n                    // console.log(res,\"res\")\r\n                    if (res.code === '200') {\r\n                        this.$message.success(\"删除成功！\")\r\n                        this.getCoursList()\r\n                    } else {\r\n                        this.$message.error(\"删除失败！\")\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        toggleSelection(rows) {\r\n            if (rows) {\r\n                rows.forEach(row => {\r\n                    this.$refs.multipleTable.toggleRowSelection(row);\r\n                });\r\n            } else {\r\n                this.$refs.multipleTable.clearSelection();\r\n            }\r\n        },\r\n        handleSelectionChange(val) {\r\n            this.multipleSelection = val;\r\n        }\r\n    },\r\n    mounted() {\r\n        this.restaurants = this.loadAll();\r\n        // console.log(this.findCourseOb,'mounted')\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.coursG-top {\r\n    margin-top: -10px;\r\n\r\n    .el-page-header {\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n}\r\n\r\n/deep/.el-table {\r\n    margin-top: 20px;\r\n\r\n    .cell {\r\n        display: -webkit-box;\r\n        -webkit-box-orient: vertical;\r\n        -webkit-line-clamp: 2;\r\n    }\r\n}\r\n\r\n.el-pagination {\r\n    margin-top: 20px;\r\n}\r\n\r\nh3 {\r\n    text-align: center;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}