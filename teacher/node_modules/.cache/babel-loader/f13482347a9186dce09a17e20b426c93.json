{"ast":null,"code":"export default {\n  data() {\n    return {\n      pageNum: 1,\n      pageSize: 8,\n      total: 0,\n      options: [{\n        value: 0,\n        label: '申请报名'\n      }, {\n        value: 1,\n        label: '报名通过'\n      }, {\n        value: 2,\n        label: '报名不通过'\n      }, {\n        value: 3,\n        label: '取消报名'\n      }],\n      audit: '',\n      //搜索选择框\n      getData: [],\n      practiveData: '' //章节id\n    };\n  },\n\n  created() {\n    //\n    this.practiveData = JSON.parse(this.$route.query.practiveData);\n    //console.log(this.practiveData)\n\n    //请求分页查询数据\n    this.load();\n  },\n  methods: {\n    load() {\n      this.request.get(\"/service-practice/practice/findpracticepage\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          praId: this.practiveData.praId,\n          audit: this.audit\n        }\n      }).then(res => {\n        this.getData = res.data.records;\n        this.total = res.data.total;\n        console.log(res, 'res');\n      });\n    },\n    //每页显示多少条数据\n    handleSizeChange(pageSize) {\n      // console.log(pageSize)\n      this.pageSize = pageSize;\n      this.load();\n    },\n    //页码\n    handleCurrentChange(pageNum) {\n      // console.log(pageNum)\n      this.pageNum = pageNum;\n      this.load();\n    },\n    //刷新\n    reast() {\n      this.audit = '', this.load();\n    },\n    //审核通过\n    check(ids) {\n      this.request.post(\"/service-practice/practice/auditPractice\", {\n        id: ids,\n        audit: 1\n      }).then(res => {\n        //console.log(res,'报名')\n        if (res.code === '200') {\n          this.$message.success(\"审核通过成功！\");\n          this.load();\n        } else {\n          this.$message.error(\"审核失败！\");\n        }\n      });\n    },\n    //审核不通过\n    checkout(ids) {\n      this.request.post(\"/service-practice/practice/auditPractice\", {\n        id: ids,\n        audit: 2\n      }).then(res => {\n        console.log(res, '报名');\n        if (res.code === '200') {\n          this.$message.success(\"审核通过成功！\");\n          this.load();\n        } else {\n          this.$message.error(\"审核失败！\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AAqEA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC,UACA;QACAC;QACAC;MACA,GACA;QACAD;QACAC;MACA,GACA;QACAD;QACAC;MACA,GACA;QACAD;QACAC;MACA,EACA;MACAC;MAAA;MACAC;MACAC;IACA;EACA;;EACAC;IACA;IACA;IACA;;IAEA;IACA;EACA;EACAC;IACAC;MACA;QACAC;UACAZ;UACAC;UACAY;UACAP;QACA;MAEA;QACA;QACA;QACAQ;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA,iBACA;IACA;IAEA;IACAC;MACA;QACAC;QACAb;MACA;QACA;QACA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACAc;MACA;QACAD;QACAb;MACA;QACAQ;QACA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["data","pageNum","pageSize","total","options","value","label","audit","getData","practiveData","created","methods","load","params","praId","console","handleSizeChange","handleCurrentChange","reast","check","id","checkout"],"sourceRoot":"src/views/Practice","sources":["practiceStudent.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-page-header @back=\"$router.push('/practice')\" content=\"线下实践管理\"></el-page-header>\r\n\r\n        <div class=\"practice\" >\r\n            <el-descriptions :title=\"practiveData.praName\">\r\n                <el-descriptions-item label=\"所属课程名\">{{practiveData.couName}}</el-descriptions-item>\r\n                <el-descriptions-item label=\"开始时间\">{{practiveData.praTime}}</el-descriptions-item>\r\n                <el-descriptions-item label=\"地址\">{{practiveData.praSite}}</el-descriptions-item>\r\n                <el-descriptions-item label=\"任务内容\">{{practiveData.praMain}}</el-descriptions-item>\r\n            </el-descriptions>\r\n        </div>\r\n\r\n        <div class=\"top\">\r\n            <el-select v-model=\"audit\" clearable  placeholder=\"请选择\">\r\n                <el-option v-for=\"item in options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" ></el-option>\r\n            </el-select>\r\n            <el-button size=\"mini\" style=\"margin-left: 10px\" type=\"primary\" @click=\"load\">搜索</el-button> \r\n            <!-- 刷新按钮 -->\r\n            <el-button size=\"mini\" style=\"margin-left: 10px\" type=\"primary\" @click=\"reast\"><i class=\"el-icon-refresh\"></i></el-button> \r\n\r\n            <el-table :data=\"getData\" :header-cell-style=\"{ backgroundColor: 'rgb(244, 244, 245)' }\"\r\n                style=\"margin-bottom: 10px\" border stripe>\r\n\r\n                <el-table-column prop=\"stuName\" label=\"学生姓名\" width=\"150\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"praDate\" label=\"报名时间\" width=\"150\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"audit\" key=\"audit\" label=\"报名审核\" width=\"180\" align=\"center\">\r\n                    <template slot-scope=\"scope\" >\r\n                        <template v-if=\"scope.row.audit === 0\">申请报名</template>\r\n                        <template v-else-if=\"scope.row.audit === 1\">报名通过</template>\r\n                        <template v-else-if=\"scope.row.audit === 2\">报名不通过</template>   \r\n                        <template v-else-if=\"scope.row.audit === 3\">取消报名</template>                </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\" prop=\"audit\"  align=\"center\">\r\n                    <template slot-scope=\"scope\" >\r\n                        <template v-if=\"scope.row.audit != 3 \">\r\n                            <el-button icon=\"el-icon-check\" type=\"success\" \r\n                                active-color=\"#13ce66\" inactive-color=\"#ccc\" @click=\"check(scope.row.id)\" plain>通过\r\n                            </el-button>\r\n                            <el-button icon=\"el-icon-close\" type=\"warning\" \r\n                                active-color=\"#13ce66\" inactive-color=\"#ccc\"\r\n                                @click=\"checkout(scope.row.id)\"\r\n                                plain>不通过\r\n                            </el-button>\r\n                        </template>                   \r\n                    </template>\r\n                </el-table-column>\r\n\r\n            </el-table>\r\n\r\n            <!-- 分页 -->\r\n            <div class=\"block\">\r\n                <el-pagination \r\n                    @size-change=\"handleSizeChange\"\r\n                    @current-change=\"handleCurrentChange\"\r\n                    :current-page.=\"pageNum\" :page-sizes=\"[8, 10, 12]\" \r\n                    :page-size=\"pageSize\"\r\n                    layout=\"total, sizes, prev, pager, next, jumper\" \r\n                    :total=\"total\">\r\n                </el-pagination>\r\n            </div>\r\n        </div>\r\n        \r\n       \r\n        \r\n    </div>\r\n    \r\n</template>\r\n<script>\r\nexport default{\r\n    data () {\r\n        return {           \r\n            pageNum: 1,\r\n            pageSize: 8,\r\n            total: 0,\r\n            options: [\r\n                {\r\n                    value: 0,\r\n                    label: '申请报名'\r\n                },\r\n                {\r\n                    value: 1,\r\n                    label: '报名通过'\r\n                }, \r\n                {\r\n                    value: 2,\r\n                    label: '报名不通过'\r\n                },\r\n                {\r\n                    value: 3,\r\n                    label: '取消报名'\r\n                },\r\n            ],\r\n            audit: '',//搜索选择框\r\n            getData: [],\r\n            practiveData: '',//章节id\r\n        }\r\n    },\r\n    created() {\r\n        //\r\n        this.practiveData =  JSON.parse(this.$route.query.practiveData)\r\n        //console.log(this.practiveData)\r\n\r\n        //请求分页查询数据\r\n        this.load()\r\n    },\r\n    methods: {\r\n        load() {\r\n            this.request.get(\"/service-practice/practice/findpracticepage\", {\r\n                params: {\r\n                    pageNum: this.pageNum,\r\n                    pageSize: this.pageSize,\r\n                    praId: this.practiveData.praId,\r\n                    audit: this.audit,\r\n                }\r\n\r\n            }).then(res => {\r\n                this.getData = res.data.records\r\n                this.total = res.data.total\r\n                console.log(res,'res')\r\n            })\r\n        },\r\n        //每页显示多少条数据\r\n        handleSizeChange(pageSize) {\r\n            // console.log(pageSize)\r\n            this.pageSize = pageSize\r\n            this.load()\r\n        },\r\n        //页码\r\n        handleCurrentChange(pageNum) {\r\n            // console.log(pageNum)\r\n            this.pageNum = pageNum\r\n            this.load()\r\n        },\r\n        //刷新\r\n        reast(){\r\n            this.audit = '',\r\n            this.load()\r\n        },\r\n       \r\n        //审核通过\r\n        check(ids) {\r\n            this.request.post(\"/service-practice/practice/auditPractice\",{\r\n                id:ids,\r\n                audit: 1,\r\n            }).then(res => {\r\n                //console.log(res,'报名')\r\n                if(res.code === '200'){\r\n                    this.$message.success(\"审核通过成功！\")\r\n                    this.load()\r\n                }else{\r\n                    this.$message.error(\"审核失败！\")\r\n                }\r\n            })\r\n        },\r\n        //审核不通过\r\n        checkout(ids) {\r\n            this.request.post(\"/service-practice/practice/auditPractice\",{\r\n                id:ids,\r\n                audit: 2,\r\n            }).then(res => {\r\n                console.log(res,'报名')\r\n                if(res.code === '200'){\r\n                    this.$message.success(\"审核通过成功！\")\r\n                    this.load()\r\n                }else{\r\n                    this.$message.error(\"审核失败！\")\r\n                }\r\n            })\r\n        },\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.el-page-header{\r\n    margin-bottom: 15px;\r\n    margin-top: -10px;\r\n}\r\n.practice{\r\n    width: 65%;\r\n    margin: auto;\r\n    margin-bottom: 10px;\r\n    /deep/.el-descriptions{\r\n        \r\n        .el-descriptions__title{\r\n            font-size: 16px;\r\n        }\r\n        .el-descriptions__body .el-descriptions__table {\r\n            font-size: 14px;\r\n        }\r\n    }\r\n    \r\n}\r\n\r\n\r\n.top{\r\n    border-top: 2px solid rgb(228, 225, 225);\r\n    padding-top: 15px;\r\n    margin-top: 20px;\r\n    width: 65%;\r\n    margin: auto;\r\n    /deep/.el-table {      \r\n        margin-bottom: 20px;\r\n        margin-top: 20px;\r\n           .cell {\r\n               display: -webkit-box;\r\n               -webkit-box-orient: vertical;\r\n               -webkit-line-clamp: 2;\r\n               overflow: hidden;\r\n           }\r\n       }\r\n}\r\n\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}