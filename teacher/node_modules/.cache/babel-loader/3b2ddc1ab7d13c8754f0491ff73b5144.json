{"ast":null,"code":"export default {\n  name: \"tabAudit\",\n  data() {\n    return {\n      options: [{\n        value: 0,\n        label: '正常'\n      }, {\n        value: 1,\n        label: '申请退款'\n      }, {\n        value: 2,\n        label: '申请退款通过'\n      }, {\n        value: 3,\n        label: '申请退款不通过'\n      }],\n      orderFormP: '',\n      getData: [],\n      pageNum: 1,\n      pageSize: 8,\n      total: 0\n    };\n  },\n  created() {\n    //请求分页查询数据\n    this.load();\n  },\n  methods: {\n    load() {\n      this.request.get(\"/service-order/order/findorderdetail\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          orderFormP: this.orderFormP\n        }\n      }).then(res => {\n        console.log(res);\n        this.getData = res.data.records;\n        this.total = res.data.total;\n      });\n    },\n    //每页显示多少条数据\n    handleSizeChange(pageSize) {\n      // console.log(pageSize)\n      this.pageSize = pageSize;\n      this.load();\n    },\n    //页码\n    //刷新\n    reast() {\n      this.orderFormP = '', this.load();\n    },\n    handleCurrentChange(pageNum) {\n      // console.log(pageNum)\n      this.pageNum = pageNum;\n      this.load();\n    },\n    //审核通过\n    check(orderFormP, orderId, couId) {\n      //console.log(orderFormP,orderId,couId)\n\n      this.request.post(\"/service-order/order\", {\n        id: orderId,\n        orderFormP: 2\n      }).then(res => {\n        //console.log(res)\n      });\n      this.request.post(\"/service-order/order/refund\", [{\n        couId: couId,\n        orderId: orderId\n      }]).then(res => {\n        if (res.code === '200') {\n          this.$message.success(\"审核通过！\");\n          this.load();\n        } else {\n          this.$message.error(\"审核失败\");\n        }\n      });\n    },\n    //审核不通过\n    checkout(orderId) {\n      this.request.post(\"/service-order/order\", {\n        id: orderId,\n        orderFormP: 3\n      }).then(res => {\n        console.log(res);\n        if (res.code === '200') {\n          this.$message.success(\"审核不通过！\");\n          this.load();\n        } else {\n          this.$message.error(\"审核失败\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AA+DA;EACAA;EACAC;IACA;MACAC,UACA;QACAC;QACAC;MACA,GACA;QACAD;QACAC;MACA,GACA;QACAD;QACAC;MACA,GACA;QACAD;QACAC;MACA,EACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACA;IACA;EACA;EACAC;IACAC;MACA;QACAC;UACAN;UACAC;UACAH;QACA;MAEA;QACAS;QACA;QACA;MACA,EACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACA;IACAC;MACA,sBACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;;MAEA;QACAC;QACAd;MACA;QACA;MACA;MAEA,kDACA;QACAe;QACAC;MACA,EACA;QACA;UACA;UACA;QACA;UACA;QACA;MAGA;IACA;IACA;IACAC;MACA;QACAH;QACAd;MACA;QACAS;QACA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;EAGA;AACA","names":["name","data","options","value","label","orderFormP","getData","pageNum","pageSize","total","created","methods","load","params","console","handleSizeChange","reast","handleCurrentChange","check","id","couId","orderId","checkout"],"sourceRoot":"src/views/order","sources":["order.vue"],"sourcesContent":["<template>\r\n    <!--补签审核-->\r\n    <div CLASS=\"MeetingMember\">\r\n        <el-select v-model=\"orderFormP\" clearable  placeholder=\"请选择\">\r\n            <el-option v-for=\"item in options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n        </el-select>\r\n        <el-button size=\"mini\" style=\"margin-left: 10px\" type=\"primary\" @click=\"load\">搜索</el-button> \r\n        <!-- 刷新按钮 -->\r\n        <el-button size=\"mini\" style=\"margin-left: 10px\" type=\"primary\" @click=\"reast\"><i class=\"el-icon-refresh\"></i></el-button> \r\n        <el-table :data=\"getData\" :header-cell-style=\"{ backgroundColor: 'rgb(244, 244, 245)' }\"\r\n            style=\"margin-bottom: 10px\" stripe>\r\n\r\n            <el-table-column prop=\"orderId\" label=\"订单id\" width=\"70\" align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"username\" label=\"退货账号\" width=\"100\" align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"couName\" label=\"课程名称\" width=\"150\" align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"couPrice\" label=\"课程价格\" width=\"80\" align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"couIntroduction\" label=\"课程介绍\" width=\"180\" align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"orderFormDate\" label=\"订单完成时间\" width=\"180\" align=\"center\"></el-table-column>\r\n            <el-table-column prop=\"orderFormP\" key=\"orderFormP\" label=\"订单完成情况\" width=\"120\" align=\"center\">\r\n                <template slot-scope=\"scope\" >\r\n                    <template v-if=\"scope.row.orderFormP === 0\">正常</template>\r\n                    <template v-else-if=\"scope.row.orderFormP === 1\">申请退款</template>\r\n                    <template v-else-if=\"scope.row.orderFormP === 2\">申请退款通过</template>\r\n                    <template v-else-if=\"scope.row.orderFormP === 3\">申请退款不通过</template>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" prop=\"orderFormP\"  align=\"center\">\r\n                <template slot-scope=\"scope\" >\r\n                    <template v-if=\"scope.row.orderFormP !== 0\">\r\n                        <el-button icon=\"el-icon-check\" type=\"success\" v-model=\"scope.row.participateStatus\"\r\n                            active-color=\"#13ce66\" inactive-color=\"#ccc\" @click=\"check(scope.row.orderFormP,scope.row.orderId,scope.row.couId)\" plain>通过\r\n                        </el-button>\r\n                        <el-button icon=\"el-icon-close\" type=\"warning\" v-model=\"scope.row.participateStatus\"\r\n                            active-color=\"#13ce66\" inactive-color=\"#ccc\"\r\n                            @click=\"checkout(scope.row.orderId)\"\r\n                            plain>不通过\r\n                        </el-button>\r\n                    </template>                   \r\n                </template>\r\n            </el-table-column>\r\n\r\n        </el-table>\r\n\r\n\r\n \r\n\r\n        <!-- 分页 -->\r\n        <div class=\"block\">\r\n            <el-pagination \r\n                @size-change=\"handleSizeChange\"\r\n                 @current-change=\"handleCurrentChange\"\r\n                :current-page.=\"pageNum\" :page-sizes=\"[8, 10, 12]\" \r\n                :page-size=\"pageSize\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\" \r\n                :total=\"total\">\r\n            </el-pagination>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</template>\r\n    \r\n<script>\r\nexport default {\r\n    name: \"tabAudit\",\r\n    data() {\r\n        return {\r\n            options: [\r\n                {\r\n                    value: 0,\r\n                    label: '正常'\r\n                },\r\n                {\r\n                    value: 1,\r\n                    label: '申请退款'\r\n                }, \r\n                {\r\n                    value: 2,\r\n                    label: '申请退款通过'\r\n                },\r\n                {\r\n                    value: 3,\r\n                    label: '申请退款不通过'\r\n                },\r\n            ],\r\n            orderFormP: '',\r\n            getData: [],\r\n            pageNum: 1,\r\n            pageSize: 8,\r\n            total: 0,\r\n        }\r\n    },\r\n\r\n    created() {\r\n        //请求分页查询数据\r\n        this.load()\r\n    },\r\n    methods: {\r\n        load() {\r\n            this.request.get(\"/service-order/order/findorderdetail\", {\r\n                params: {\r\n                    pageNum: this.pageNum,\r\n                    pageSize: this.pageSize,\r\n                    orderFormP: this.orderFormP,\r\n                }\r\n\r\n            }).then(res => {\r\n                console.log(res)\r\n                this.getData = res.data.records\r\n                this.total = res.data.total\r\n            }\r\n            )\r\n        },\r\n        //每页显示多少条数据\r\n        handleSizeChange(pageSize) {\r\n            // console.log(pageSize)\r\n            this.pageSize = pageSize\r\n            this.load()\r\n        },\r\n        //页码\r\n        //刷新\r\n        reast(){\r\n            this.orderFormP = '',\r\n            this.load()\r\n        },\r\n        handleCurrentChange(pageNum) {\r\n            // console.log(pageNum)\r\n            this.pageNum = pageNum\r\n            this.load()\r\n        },\r\n        //审核通过\r\n        check(orderFormP,orderId,couId) {\r\n            //console.log(orderFormP,orderId,couId)\r\n            \r\n            this.request.post(\"/service-order/order\",{\r\n                id: orderId,\r\n                orderFormP: 2\r\n            }).then(res => {\r\n                //console.log(res)\r\n            })\r\n           \r\n            this.request.post(\"/service-order/order/refund\",[\r\n                {\r\n                    couId:couId,\r\n                    orderId: orderId,\r\n                }\r\n            ]).then(res => {\r\n                if(res.code === '200'){\r\n                    this.$message.success(\"审核通过！\")\r\n                    this.load()\r\n                }else{\r\n                    this.$message.error(\"审核失败\")\r\n                }\r\n               \r\n                \r\n            })\r\n        },\r\n        //审核不通过\r\n        checkout(orderId) {\r\n            this.request.post(\"/service-order/order\",{\r\n                id: orderId,\r\n                orderFormP: 3\r\n            }).then(res => {\r\n                console.log(res)\r\n                if(res.code === '200'){\r\n                    this.$message.success(\"审核不通过！\")\r\n                    this.load()\r\n                }else{\r\n                    this.$message.error(\"审核失败\")\r\n                }\r\n            })\r\n        },\r\n\r\n\r\n    }\r\n}\r\n</script>\r\n    \r\n<style lang=\"less\" scoped>\r\n/deep/.el-table {\r\n    margin-bottom: 20px;\r\n    margin-top: 20px;\r\n       .cell {\r\n           display: -webkit-box;\r\n           -webkit-box-orient: vertical;\r\n           -webkit-line-clamp: 2;\r\n       }\r\n   }\r\n\r\n   .el-tag--small {\r\n       height: 33px;\r\n       padding: 4px 13px;\r\n       line-height: 22px;\r\n       font-size: initial;\r\n   }\r\n</style>"]},"metadata":{},"sourceType":"module"}