{"ast":null,"code":"import Sortable from 'sortablejs';\nexport default {\n  data() {\n    return {\n      dataForm: {\n        id: '',\n        name: '',\n        classify: '',\n        orderNumber: '',\n        netAddress: ''\n      },\n      dataList: [{\n        name: '1111',\n        netAddress: 'www.111'\n      }, {\n        name: '222',\n        netAddress: 'www.222'\n      }],\n      pageIndex: 1,\n      pageSize: 10,\n      totalPage: 0,\n      dataListLoading: false,\n      dataListSelections: [],\n      addOrUpdateVisible: false\n    };\n  },\n  components: {\n    AddOrUpdate,\n    Sortable\n  },\n  // 组件实例化完毕，但页面还未显示,接收上个页面传过来的参数\n  created() {\n    //this.classify = this.$route.params.classifyId\n  },\n  activated() {\n    this.getDataList();\n  },\n  mounted() {\n    this.rowDrop();\n  },\n  methods: {\n    // 获取数据列表\n    getDataList() {\n      this.dataListLoading = true;\n      // this.$http({\n      //   url: this.$http.adornUrl('/xxx/outdata/list'),\n      //   method: 'get',\n      //   params: this.$http.adornParams({\n      //     'page': this.pageIndex,\n      //     'limit': this.pageSize,\n      //     'classify': this.classify,\n      //     'name': this.dataForm.name\n      //   })\n      // }).then(({data}) => {\n      //   if (data && data.code === 0) {\n      //     this.dataList = data.page.list\n      //     this.totalPage = data.page.totalCount\n      //   } else {\n      //     this.dataList = []\n      //     this.totalPage = 0\n      //   }\n      //   this.dataListLoading = false\n      // })\n    },\n\n    // 每页数\n    sizeChangeHandle(val) {\n      this.pageSize = val;\n      this.pageIndex = 1;\n      this.getDataList();\n    },\n    // 当前页\n    currentChangeHandle(val) {\n      this.pageIndex = val;\n      this.getDataList();\n    },\n    // 多选\n    selectionChangeHandle(val) {\n      this.dataListSelections = val;\n    },\n    // 新增 / 修改\n    addOrUpdateHandle(id) {\n      this.addOrUpdateVisible = true;\n      // this.$nextTick(() => {\n      //   this.$refs.addOrUpdate.init(id)\n      // })\n    },\n\n    // 删除\n    deleteHandle(id) {\n      var ids = id ? [id] : this.dataListSelections.map(item => {\n        return item.id;\n      });\n      // this.$confirm(`确定对[id=${ids.join(',')}]进行[${id ? '删除' : '批量删除'}]操作?`, '提示', {\n      //   confirmButtonText: '确定',\n      //   cancelButtonText: '取消',\n      //   type: 'warning'\n      // }).then(() => {\n      //   this.$http({\n      //     url: this.$http.adornUrl('/xxx/outdata/delete'),\n      //     method: 'post',\n      //     data: this.$http.adornData(ids, false)\n      //   }).then(({data}) => {\n      //     if (data && data.code === 0) {\n      //       this.$message({\n      //         message: '操作成功',\n      //         type: 'success',\n      //         duration: 1500,\n      //         onClose: () => {\n      //           this.getDataList()\n      //         }\n      //       })\n      //     } else {\n      //       this.$message.error(data.msg)\n      //     }\n      //   })\n      // })\n    },\n\n    // 行拖拽\n    rowDrop() {\n      const tbody = document.querySelector('.el-table__body-wrapper tbody');\n      Sortable.create(tbody, {\n        onEnd: ({\n          newIndex,\n          oldIndex\n        }) => {\n          //     this.$http({\n          //       url: this.$http.adornUrl('/xxx/outdata/drag'),\n          //       method: 'get',\n          //       params: this.$http.adornParams({\n          //         'pageIndex': this.pageIndex,\n          //         'pageSize': this.pageSize,\n          //         'newIndex': newIndex,\n          //         'oldIndex': oldIndex\n          //       })\n          //     }).then(() => {\n          //       this.getDataList()\n          //     })\n        }\n      });\n    },\n    goBack() {\n      this.$router.back(-1);\n    }\n  }\n};","map":{"version":3,"mappings":"AA2EA;AACA;EACAA;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC,WACA;QACAJ;QACAG;MACA,GACA;QACAH;QACAG;MACA,EACA;MACAE;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;IACAC;EACA;EACA;EACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;IACA;;IACA;IACAC;MACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;;IACA;IACAC;MACA;MACAX;QACAY;UAAAC;UAAAC;QAAA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;MACA;IACA;IACAC;MACA;IACA;EACA;AACA","names":["data","dataForm","id","name","classify","orderNumber","netAddress","dataList","pageIndex","pageSize","totalPage","dataListLoading","dataListSelections","addOrUpdateVisible","components","AddOrUpdate","Sortable","created","activated","mounted","methods","getDataList","sizeChangeHandle","currentChangeHandle","selectionChangeHandle","addOrUpdateHandle","deleteHandle","rowDrop","onEnd","newIndex","oldIndex","goBack"],"sourceRoot":"src/views","sources":["ex.vue"],"sourcesContent":["<template>\r\n  <div class=\"mod-config\">\r\n    <el-form :inline=\"true\" :model=\"dataForm\" @keyup.enter.native=\"getDataList()\">\r\n      <el-form-item>\r\n        <el-input v-model=\"dataForm.name\" placeholder=\"网站名称\" clearable></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"getDataList()\">查询</el-button>\r\n        <!-- <el-button type=\"success\" @click=\"addOrUpdateHandle()\">新增</el-button> -->\r\n        <el-button type=\"danger\"  @click=\"deleteHandle()\" :disabled=\"dataListSelections.length <= 0\">批量删除</el-button>\r\n        <el-button type=\"warning\" @click=\"goBack()\">返回</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <el-table\r\n      row-key=\"id\"\r\n      :data=\"dataList\"\r\n      border\r\n      v-loading=\"dataListLoading\"\r\n      @selection-change=\"selectionChangeHandle\"\r\n      style=\"width: 100%;\">\r\n      <el-table-column\r\n        type=\"selection\"\r\n        header-align=\"left\"\r\n        align=\"left\"\r\n        width=\"50\">\r\n      </el-table-column>\r\n      <!-- <el-table-column\r\n        width=\"150\"\r\n        prop=\"orderNumber\"\r\n        header-align=\"left\"\r\n        align=\"left\"\r\n        label=\"排列序号\">\r\n      </el-table-column> -->\r\n      <el-table-column\r\n        prop=\"name\"\r\n        header-align=\"left\"\r\n        align=\"left\"\r\n        label=\"网站名称\">\r\n        <template slot-scope=\"scope\">\r\n          <a :href=\"scope.row.netAddress\" target=\"_blank\" style=\"text-decoration: none; color: black;\">{{scope.row.name}}</a>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"netAddress\"\r\n        header-align=\"left\"\r\n        align=\"left\"\r\n        label=\"网站地址\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"operation\"\r\n        fixed=\"right\"\r\n        header-align=\"center\"\r\n        align=\"center\"\r\n        width=\"150\"\r\n        label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"text\" size=\"small\" @click=\"addOrUpdateHandle(scope.row.id)\">修改</el-button>\r\n          <el-button type=\"text\" size=\"small\" @click=\"deleteHandle(scope.row.id)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      @size-change=\"sizeChangeHandle\"\r\n      @current-change=\"currentChangeHandle\"\r\n      :current-page=\"pageIndex\"\r\n      :page-sizes=\"[5, 10, 20, 50, 100]\"\r\n      :page-size=\"pageSize\"\r\n      :total=\"totalPage\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\">\r\n    </el-pagination>\r\n    <!-- 弹窗, 新增 / 修改 -->\r\n  </div>\r\n</template>\r\n \r\n<script>\r\n  import Sortable from 'sortablejs'\r\n  export default {\r\n    data () {\r\n      return {\r\n        dataForm: {\r\n          id: '',\r\n          name: '',\r\n          classify: '',\r\n          orderNumber: '',\r\n          netAddress: ''\r\n        },\r\n        dataList: [\r\n          {\r\n            name: '1111',\r\n            netAddress: 'www.111'\r\n          },\r\n          {\r\n            name: '222',\r\n            netAddress: 'www.222'\r\n          }\r\n        ],\r\n        pageIndex: 1,\r\n        pageSize: 10,\r\n        totalPage: 0,\r\n        dataListLoading: false,\r\n        dataListSelections: [],\r\n        addOrUpdateVisible: false\r\n      }\r\n    },\r\n    components: {\r\n      AddOrUpdate,\r\n      Sortable\r\n    },\r\n    // 组件实例化完毕，但页面还未显示,接收上个页面传过来的参数\r\n    created () {\r\n      //this.classify = this.$route.params.classifyId\r\n    },\r\n    activated () {\r\n      this.getDataList()\r\n    },\r\n    mounted () {\r\n      this.rowDrop()\r\n    },\r\n    methods: {\r\n      // 获取数据列表\r\n      getDataList () {\r\n        this.dataListLoading = true\r\n        // this.$http({\r\n        //   url: this.$http.adornUrl('/xxx/outdata/list'),\r\n        //   method: 'get',\r\n        //   params: this.$http.adornParams({\r\n        //     'page': this.pageIndex,\r\n        //     'limit': this.pageSize,\r\n        //     'classify': this.classify,\r\n        //     'name': this.dataForm.name\r\n        //   })\r\n        // }).then(({data}) => {\r\n        //   if (data && data.code === 0) {\r\n        //     this.dataList = data.page.list\r\n        //     this.totalPage = data.page.totalCount\r\n        //   } else {\r\n        //     this.dataList = []\r\n        //     this.totalPage = 0\r\n        //   }\r\n        //   this.dataListLoading = false\r\n        // })\r\n      },\r\n      // 每页数\r\n      sizeChangeHandle (val) {\r\n        this.pageSize = val\r\n        this.pageIndex = 1\r\n        this.getDataList()\r\n      },\r\n      // 当前页\r\n      currentChangeHandle (val) {\r\n        this.pageIndex = val\r\n        this.getDataList()\r\n      },\r\n      // 多选\r\n      selectionChangeHandle (val) {\r\n        this.dataListSelections = val\r\n      },\r\n      // 新增 / 修改\r\n      addOrUpdateHandle (id) {\r\n        this.addOrUpdateVisible = true\r\n        // this.$nextTick(() => {\r\n        //   this.$refs.addOrUpdate.init(id)\r\n        // })\r\n      },\r\n      // 删除\r\n      deleteHandle (id) {\r\n        var ids = id ? [id] : this.dataListSelections.map(item => {\r\n          return item.id\r\n        })\r\n        // this.$confirm(`确定对[id=${ids.join(',')}]进行[${id ? '删除' : '批量删除'}]操作?`, '提示', {\r\n        //   confirmButtonText: '确定',\r\n        //   cancelButtonText: '取消',\r\n        //   type: 'warning'\r\n        // }).then(() => {\r\n        //   this.$http({\r\n        //     url: this.$http.adornUrl('/xxx/outdata/delete'),\r\n        //     method: 'post',\r\n        //     data: this.$http.adornData(ids, false)\r\n        //   }).then(({data}) => {\r\n        //     if (data && data.code === 0) {\r\n        //       this.$message({\r\n        //         message: '操作成功',\r\n        //         type: 'success',\r\n        //         duration: 1500,\r\n        //         onClose: () => {\r\n        //           this.getDataList()\r\n        //         }\r\n        //       })\r\n        //     } else {\r\n        //       this.$message.error(data.msg)\r\n        //     }\r\n        //   })\r\n        // })\r\n      },\r\n      // 行拖拽\r\n      rowDrop () {\r\n        const tbody = document.querySelector('.el-table__body-wrapper tbody')\r\n        Sortable.create(tbody, {\r\n          onEnd: ({ newIndex, oldIndex }) => {\r\n        //     this.$http({\r\n        //       url: this.$http.adornUrl('/xxx/outdata/drag'),\r\n        //       method: 'get',\r\n        //       params: this.$http.adornParams({\r\n        //         'pageIndex': this.pageIndex,\r\n        //         'pageSize': this.pageSize,\r\n        //         'newIndex': newIndex,\r\n        //         'oldIndex': oldIndex\r\n        //       })\r\n        //     }).then(() => {\r\n        //       this.getDataList()\r\n        //     })\r\n          }\r\n        })\r\n      },\r\n      goBack () {\r\n        this.$router.back(-1)\r\n      }\r\n    }\r\n  }\r\n</script>"]},"metadata":{},"sourceType":"module"}